{"version":3,"file":"viewport.es.js","sources":["../src/input-manager.js","../src/plugin-manager.js","../src/plugins/plugin.js","../src/plugins/drag.js","../src/plugins/pinch.js","../src/plugins/clamp.js","../src/plugins/clamp-zoom.js","../src/plugins/decelerate.js","../node_modules/penner/penner.js","../src/ease.js","../src/plugins/bounce.js","../src/plugins/snap.js","../src/plugins/snap-zoom.js","../src/plugins/follow.js","../src/plugins/wheel.js","../src/plugins/mouse-edges.js","../src/plugins/animate.js","../src/viewport.js"],"sourcesContent":["import * as PIXI from 'pixi.js-legacy'\n\n/**\n * @typedef ViewportTouch\n * @property {number} id\n * @property {PIXI.Point} last\n*/\n\n/**\n * handles all input for Viewport\n * @private\n */\nexport class InputManager {\n    constructor(viewport) {\n        this.viewport = viewport\n\n        /**\n         * list of active touches on viewport\n         * @type {ViewportTouch[]}\n         */\n        this.touches = []\n        this.addListeners()\n    }\n\n    /**\n     * add input listeners\n     * @private\n     */\n    addListeners() {\n        this.viewport.interactive = true\n        if (!this.viewport.forceHitArea) {\n            this.viewport.hitArea = new PIXI.Rectangle(0, 0, this.viewport.worldWidth, this.viewport.worldHeight)\n        }\n        this.viewport.on('pointerdown', this.down, this)\n        this.viewport.on('pointermove', this.move, this)\n        this.viewport.on('pointerup', this.up, this)\n        this.viewport.on('pointerupoutside', this.up, this)\n        this.viewport.on('pointercancel', this.up, this)\n        this.viewport.on('pointerout', this.up, this)\n        this.wheelFunction = (e) => this.handleWheel(e)\n        this.viewport.options.divWheel.addEventListener('wheel', this.wheelFunction, { passive: this.viewport.options.passiveWheel })\n        this.isMouseDown = false\n    }\n\n    /**\n     * removes all event listeners from viewport\n     * (useful for cleanup of wheel when removing viewport)\n     */\n    destroy() {\n        this.viewport.options.divWheel.removeEventListener('wheel', this.wheelFunction)\n    }\n\n    /**\n     * handle down events for viewport\n     * @param {PIXI.InteractionEvent} event\n     */\n    down(event) {\n        if (this.viewport.pause || !this.viewport.worldVisible) {\n            return\n        }\n        if (event.data.pointerType === 'mouse') {\n            this.isMouseDown = true\n        }\n        else if (!this.get(event.data.pointerId)) {\n            this.touches.push({ id: event.data.pointerId, last: null })\n        }\n        if (this.count() === 1) {\n            this.last = event.data.global.clone()\n\n            // clicked event does not fire if viewport is decelerating or bouncing\n            const decelerate = this.viewport.plugins.get('decelerate', true)\n            const bounce = this.viewport.plugins.get('bounce', true)\n            if ((!decelerate || !decelerate.isActive()) && (!bounce || !bounce.isActive())) {\n                this.clickedAvailable = true\n            }\n            else {\n                this.clickedAvailable = false\n            }\n        }\n        else {\n            this.clickedAvailable = false\n        }\n\n        const stop = this.viewport.plugins.down(event)\n        if (stop && this.viewport.options.stopPropagation) {\n            event.stopPropagation()\n        }\n    }\n\n    /**\n     * @param {number} change\n     * @returns whether change exceeds threshold\n     */\n    checkThreshold(change) {\n        if (Math.abs(change) >= this.viewport.threshold) {\n            return true\n        }\n        return false\n    }\n\n    /**\n     * handle move events for viewport\n     * @param {PIXI.InteractionEvent} event\n     */\n    move(event) {\n        if (this.viewport.pause || !this.viewport.worldVisible) {\n            return\n        }\n\n        const stop = this.viewport.plugins.move(event)\n\n        if (this.clickedAvailable) {\n            const distX = event.data.global.x - this.last.x\n            const distY = event.data.global.y - this.last.y\n            if (this.checkThreshold(distX) || this.checkThreshold(distY)) {\n                this.clickedAvailable = false\n            }\n        }\n\n        if (stop && this.viewport.options.stopPropagation) {\n            event.stopPropagation()\n        }\n    }\n\n    /**\n     * handle up events for viewport\n     * @param {PIXI.InteractionEvent} event\n     */\n    up(event) {\n        if (this.viewport.pause || !this.viewport.worldVisible) {\n            return\n        }\n\n        if (event.data.pointerType === 'mouse') {\n            this.isMouseDown = false\n        }\n\n        if (event.data.pointerType !== 'mouse') {\n            this.remove(event.data.pointerId)\n        }\n\n        const stop = this.viewport.plugins.up(event)\n\n        if (this.clickedAvailable && this.count() === 0) {\n            this.viewport.emit('clicked', { event: event, screen: this.last, world: this.viewport.toWorld(this.last), viewport: this })\n            this.clickedAvailable = false\n        }\n\n        if (stop && this.viewport.options.stopPropagation) {\n            event.stopPropagation()\n        }\n    }\n\n    /**\n     * gets pointer position if this.interaction is set\n     * @param {WheelEvent} event\n     * @return {PIXI.Point}\n     */\n    getPointerPosition(event) {\n        let point = new PIXI.Point()\n        if (this.viewport.options.interaction) {\n            this.viewport.options.interaction.mapPositionToPoint(point, event.clientX, event.clientY)\n        }\n        else {\n            point.x = event.clientX\n            point.y = event.clientY\n        }\n        return point\n    }\n\n    /**\n     * handle wheel events\n     * @param {WheelEvent} event\n     */\n    handleWheel(event) {\n        if (this.viewport.pause || !this.viewport.worldVisible) {\n            return\n        }\n\n        // only handle wheel events where the mouse is over the viewport\n        const point = this.viewport.toLocal(this.getPointerPosition(event))\n        if (this.viewport.left <= point.x && point.x <= this.viewport.right && this.viewport.top <= point.y && point.y <= this.viewport.bottom) {\n            const stop = this.viewport.plugins.wheel(event)\n            if (stop && !this.viewport.options.passiveWheel) {\n                event.preventDefault()\n            }\n        }\n    }\n\n    pause() {\n        this.touches = []\n        this.isMouseDown = false\n    }\n\n    /**\n     * get touch by id\n     * @param {number} id\n     * @return {ViewportTouch}\n     */\n    get(id) {\n        for (let touch of this.touches) {\n            if (touch.id === id) {\n                return touch\n            }\n        }\n        return null\n    }\n\n    /**\n     * remove touch by number\n     * @param {number} id\n     */\n    remove(id) {\n        for (let i = 0; i < this.touches.length; i++) {\n            if (this.touches[i].id === id) {\n                this.touches.splice(i, 1)\n                return\n            }\n        }\n    }\n\n    /**\n     * @returns {number} count of mouse/touch pointers that are down on the viewport\n     */\n    count() {\n        return (this.isMouseDown ? 1 : 0) + this.touches.length\n    }\n}\n","const PLUGIN_ORDER = ['drag', 'pinch', 'wheel', 'follow', 'mouse-edges', 'decelerate', 'aniamte', 'bounce', 'snap-zoom', 'clamp-zoom', 'snap', 'clamp']\r\n\r\n/**\r\n * Use this to access current plugins or add user-defined plugins\r\n */\r\nexport class PluginManager {\r\n    /**\r\n     * instantiated by Viewport\r\n     * @param {Viewport} viewport\r\n     */\r\n    constructor(viewport) {\r\n        this.viewport = viewport\r\n        this.list = []\r\n        this.plugins = {}\r\n    }\r\n\r\n    /**\r\n     * Inserts a named plugin or a user plugin into the viewport\r\n     * default plugin order: 'drag', 'pinch', 'wheel', 'follow', 'mouse-edges', 'decelerate', 'bounce', 'snap-zoom', 'clamp-zoom', 'snap', 'clamp'\r\n     * @param {string} name of plugin\r\n     * @param {Plugin} plugin - instantiated Plugin class\r\n     * @param {number} index to insert userPlugin (otherwise inserts it at the end)\r\n     */\r\n    add(name, plugin, index = PLUGIN_ORDER.length) {\r\n        this.plugins[name] = plugin\r\n        const current = PLUGIN_ORDER.indexOf(name)\r\n        if (current !== -1) {\r\n            PLUGIN_ORDER.splice(current, 1)\r\n        }\r\n        PLUGIN_ORDER.splice(index, 0, name)\r\n        this.sort()\r\n    }\r\n\r\n    /**\r\n     * get plugin\r\n     * @param {string} name of plugin\r\n     * @param {boolean} [ignorePaused] return null if plugin is paused\r\n     * @return {Plugin}\r\n     */\r\n    get(name, ignorePaused) {\r\n        if (ignorePaused) {\r\n            if (typeof this.plugins[name] !== 'undefined' && this.plugins[name].paused) {\r\n                return null\r\n            }\r\n        }\r\n        return this.plugins[name]\r\n    }\r\n\r\n    /**\r\n     * update all active plugins\r\n     * @ignore\r\n     * @param {number} elapsed type in milliseconds since last update\r\n     */\r\n    update(elapsed) {\r\n        for (let plugin of this.list) {\r\n            plugin.update(elapsed)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * resize all active plugins\r\n     * @ignore\r\n     */\r\n    resize() {\r\n        for (let plugin of this.list) {\r\n            plugin.resize()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * clamps and resets bounce and decelerate (as needed) after manually moving viewport\r\n     */\r\n    reset() {\r\n        for (let plugin of this.list) {\r\n            plugin.reset()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * removes installed plugin\r\n     * @param {string} name of plugin (e.g., 'drag', 'pinch')\r\n     */\r\n    remove(name) {\r\n        if (this.plugins[name]) {\r\n            this.plugins[name] = null\r\n            this.viewport.emit(name + '-remove')\r\n            this.sort()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * pause plugin\r\n     * @param {string} name of plugin (e.g., 'drag', 'pinch')\r\n     */\r\n    pause(name) {\r\n        if (this.plugins[name]) {\r\n            this.plugins[name].pause()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * resume plugin\r\n     * @param {string} name of plugin (e.g., 'drag', 'pinch')\r\n     */\r\n    resume(name) {\r\n        if (this.plugins[name]) {\r\n            this.plugins[name].resume()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * sort plugins according to PLUGIN_ORDER\r\n     * @ignore\r\n     */\r\n    sort() {\r\n        this.list = []\r\n        for (let plugin of PLUGIN_ORDER) {\r\n            if (this.plugins[plugin]) {\r\n                this.list.push(this.plugins[plugin])\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * handle down for all plugins\r\n     * @ignore\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    down(event) {\r\n        let stop = false\r\n        for (let plugin of this.list) {\r\n            if (plugin.down(event)) {\r\n                stop = true\r\n            }\r\n        }\r\n        return stop\r\n    }\r\n\r\n    /**\r\n     * handle move for all plugins\r\n     * @ignore\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    move(event) {\r\n        let stop = false\r\n        for (let plugin of this.viewport.plugins.list) {\r\n            if (plugin.move(event)) {\r\n                stop = true\r\n            }\r\n        }\r\n        return stop\r\n    }\r\n\r\n    /**\r\n     * handle up for all plugins\r\n     * @ignore\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    up(event) {\r\n        let stop = false\r\n        for (let plugin of this.list) {\r\n            if (plugin.up(event)) {\r\n                stop = true\r\n            }\r\n        }\r\n        return stop\r\n    }\r\n\r\n    /**\r\n     * handle wheel event for all plugins\r\n     * @ignore\r\n     * @param {WheelEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    wheel(e) {\r\n        let result = false\r\n        for (let plugin of this.list) {\r\n            if (plugin.wheel(e)) {\r\n                result = true\r\n            }\r\n        }\r\n        return result\r\n    }\r\n}\r\n","/**\r\n * derive this class to create user-defined plugins\r\n */\r\nexport class Plugin\r\n{\r\n    /**\r\n     * @param {Viewport} parent\r\n     */\r\n    constructor(parent)\r\n    {\r\n        this.parent = parent\r\n        this.paused = false\r\n    }\r\n\r\n    /** called when plugin is removed */\r\n    destroy() {}\r\n\r\n    /**\r\n     * handler for pointerdown PIXI event\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    down()\r\n    {\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * handler for pointermove PIXI event\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    move()\r\n    {\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * handler for pointerup PIXI event\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    up()\r\n    {\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * handler for wheel event on div\r\n     * @param {WheelEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    wheel()\r\n    {\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * called on each tick\r\n     * @param {number} elapsed time in millisecond since last update\r\n     */\r\n    update() { }\r\n\r\n    /** called when the viewport is resized */\r\n    resize() { }\r\n\r\n    /** called when the viewport is manually moved */\r\n    reset() { }\r\n\r\n    /** pause the plugin */\r\n    pause()\r\n    {\r\n        this.paused = true\r\n    }\r\n\r\n    /** un-pause the plugin */\r\n    resume()\r\n    {\r\n        this.paused = false\r\n    }\r\n}\r\n","import * as PIXI from 'pixi.js-legacy'\n\nimport { Plugin } from './plugin'\n\n/**\n * @typedef {object} LastDrag\n * @property {number} x\n * @property {number} y\n * @property {PIXI.Point} parent\n */\n\n/**\n * @typedef DragOptions\n * @property {string} [direction=all] direction to drag\n * @property {boolean} [pressDrag=true] whether click to drag is active\n * @property {boolean} [wheel=true] use wheel to scroll in direction (unless wheel plugin is active)\n * @property {number} [wheelScroll=1] number of pixels to scroll with each wheel spin\n * @property {boolean} [reverse] reverse the direction of the wheel scroll\n * @property {(boolean|string)} [clampWheel=false] clamp wheel(to avoid weird bounce with mouse wheel)\n * @property {string} [underflow=center] where to place world if too small for screen\n * @property {number} [factor=1] factor to multiply drag to increase the speed of movement\n * @property {string} [mouseButtons=all] changes which mouse buttons trigger drag, use: 'all', 'left', right' 'middle', or some combination, like, 'middle-right'; you may want to set viewport.options.disableOnContextMenu if you want to use right-click dragging\n * @property {string[]} [keyToPress=null] array containing {@link key|https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code} codes of keys that can be pressed for the drag to be triggered, e.g.: ['ShiftLeft', 'ShiftRight'}.\n * @property {boolean} [ignoreKeyToPressOnTouch=false] ignore keyToPress for touch events\n */\n\nconst dragOptions = {\n    direction: 'all',\n    pressDrag: true,\n    wheel: true,\n    wheelScroll: 1,\n    reverse: false,\n    clampWheel: false,\n    underflow: 'center',\n    factor: 1,\n    mouseButtons: 'all',\n    keyToPress: null,\n    ignoreKeyToPressOnTouch: false\n}\n\n/**\n * @private\n */\nexport class Drag extends Plugin {\n    /**\n     * @param {Viewport} parent\n     * @param {DragOptions} options\n     */\n    constructor(parent, options = {}) {\n        super(parent)\n        this.options = Object.assign({}, dragOptions, options)\n        this.moved = false\n        this.reverse = this.options.reverse ? 1 : -1\n        this.xDirection = !this.options.direction || this.options.direction === 'all' || this.options.direction === 'x'\n        this.yDirection = !this.options.direction || this.options.direction === 'all' || this.options.direction === 'y'\n        this.keyIsPressed = false\n\n        this.parseUnderflow()\n        this.mouseButtons(this.options.mouseButtons)\n        if (this.options.keyToPress) {\n            this.handleKeyPresses(this.options.keyToPress)\n        }\n    }\n\n    /**\n     * Handles keypress events and set the keyIsPressed boolean accordingly\n     * @param {array} codes - key codes that can be used to trigger drag event\n     */\n    handleKeyPresses(codes) {\n        parent.addEventListener(\"keydown\", e => {\n            if (codes.includes(e.code))\n                this.keyIsPressed = true\n        })\n\n        parent.addEventListener(\"keyup\", e => {\n            if (codes.includes(e.code))\n                this.keyIsPressed = false\n        })\n    }\n\n    /**\n     * initialize mousebuttons array\n     * @param {string} buttons\n     */\n    mouseButtons(buttons) {\n        if (!buttons || buttons === 'all') {\n            this.mouse = [true, true, true]\n        }\n        else {\n            this.mouse = [\n                buttons.indexOf('left') === -1 ? false : true,\n                buttons.indexOf('middle') === -1 ? false : true,\n                buttons.indexOf('right') === -1 ? false : true\n            ]\n        }\n    }\n\n    parseUnderflow() {\n        const clamp = this.options.underflow.toLowerCase()\n        if (clamp === 'center') {\n            this.underflowX = 0\n            this.underflowY = 0\n        }\n        else {\n            this.underflowX = (clamp.indexOf('left') !== -1) ? -1 : (clamp.indexOf('right') !== -1) ? 1 : 0\n            this.underflowY = (clamp.indexOf('top') !== -1) ? -1 : (clamp.indexOf('bottom') !== -1) ? 1 : 0\n        }\n    }\n\n    /**\n     * @param {PIXI.InteractionEvent} event\n     * @returns {boolean}\n     */\n    checkButtons(event) {\n        const isMouse = event.data.pointerType === 'mouse'\n        const count = this.parent.input.count()\n        if ((count === 1) || (count > 1 && !this.parent.plugins.get('pinch', true))) {\n            if (!isMouse || this.mouse[event.data.button]) {\n                return true\n            }\n        }\n        return false\n    }\n\n    /**\n     * @param {PIXI.InteractionEvent} event\n     * @returns {boolean}\n     */\n    checkKeyPress(event) {\n        if (!this.options.keyToPress || this.keyIsPressed || (this.options.ignoreKeyToPressOnTouch && event.data.pointerType === 'touch'))\n            return true\n\n        return false\n    }\n\n    /**\n     * @param {PIXI.InteractionEvent} event\n     */\n    down(event) {\n        if (this.paused || !this.options.pressDrag) {\n            return\n        }\n        if (this.checkButtons(event) && this.checkKeyPress(event)) {\n            this.last = { x: event.data.global.x, y: event.data.global.y }\n            this.current = event.data.pointerId\n            return true\n        }\n        else {\n            this.last = null\n        }\n    }\n\n    get active() {\n        return this.moved\n    }\n\n    /**\n     * @param {PIXI.InteractionEvent} event\n     */\n    move(event) {\n        if (this.paused || !this.options.pressDrag) {\n            return\n        }\n        if (this.last && this.current === event.data.pointerId) {\n            const x = event.data.global.x\n            const y = event.data.global.y\n            const count = this.parent.input.count()\n            if (count === 1 || (count > 1 && !this.parent.plugins.get('pinch', true))) {\n                const distX = x - this.last.x\n                const distY = y - this.last.y\n                if (this.moved || ((this.xDirection && this.parent.input.checkThreshold(distX)) || (this.yDirection && this.parent.input.checkThreshold(distY)))) {\n                    const newPoint = { x, y }\n                    if (this.xDirection) {\n                        this.parent.x += (newPoint.x - this.last.x) * this.options.factor\n                    }\n                    if (this.yDirection) {\n                        this.parent.y += (newPoint.y - this.last.y) * this.options.factor\n                    }\n                    this.last = newPoint\n                    if (!this.moved) {\n                        this.parent.emit('drag-start', { event: event, screen: new PIXI.Point(this.last.x, this.last.y), world: this.parent.toWorld(new PIXI.Point(this.last.x, this.last.y)), viewport: this.parent })\n                    }\n                    this.moved = true\n                    this.parent.emit('moved', { viewport: this.parent, type: 'drag' })\n                    return true\n                }\n            }\n            else {\n                this.moved = false\n            }\n        }\n    }\n\n    /**\n     * @param {PIXI.InteractionEvent} event\n     * @returns {boolean}\n     */\n    up(event) {\n        if (this.paused) {\n            return\n        }\n        const touches = this.parent.input.touches\n        if (touches.length === 1) {\n            const pointer = touches[0]\n            if (pointer.last) {\n                this.last = { x: pointer.last.x, y: pointer.last.y }\n                this.current = pointer.id\n            }\n            this.moved = false\n            return true\n        }\n        else if (this.last) {\n            if (this.moved) {\n                const screen = new PIXI.Point(this.last.x, this.last.y)\n                this.parent.emit('drag-end', { event: event, screen, world: this.parent.toWorld(screen), viewport: this.parent })\n                this.last = null\n                this.moved = false\n                return true\n            }\n        }\n    }\n\n    /**\n     * @param {WheelEvent} event\n     * @returns {boolean}\n     */\n    wheel(event) {\n        if (this.paused) {\n            return\n        }\n\n        if (this.options.wheel) {\n            const wheel = this.parent.plugins.get('wheel', true)\n            if (!wheel) {\n                if (this.xDirection) {\n                    this.parent.x += event.deltaX * this.options.wheelScroll * this.reverse\n                }\n                if (this.yDirection) {\n                    this.parent.y += event.deltaY * this.options.wheelScroll * this.reverse\n                }\n                if (this.options.clampWheel) {\n                    this.clamp()\n                }\n                this.parent.emit('wheel-scroll', this.parent)\n                this.parent.emit('moved', { viewport: this.parent, type: 'wheel' })\n                if (!this.parent.options.passiveWheel) {\n                    event.preventDefault()\n                }\n                return true\n            }\n        }\n    }\n\n    resume() {\n        this.last = null\n        this.paused = false\n    }\n\n    clamp() {\n        const decelerate = this.parent.plugins.get('decelerate', true) || {}\n        if (this.options.clampWheel !== 'y') {\n            if (this.parent.screenWorldWidth < this.parent.screenWidth) {\n                switch (this.underflowX) {\n                    case -1:\n                        this.parent.x = 0\n                        break\n                    case 1:\n                        this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth)\n                        break\n                    default:\n                        this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2\n                }\n            }\n            else {\n                if (this.parent.left < 0) {\n                    this.parent.x = 0\n                    decelerate.x = 0\n                }\n                else if (this.parent.right > this.parent.worldWidth) {\n                    this.parent.x = -this.parent.worldWidth * this.parent.scale.x + this.parent.screenWidth\n                    decelerate.x = 0\n                }\n            }\n        }\n        if (this.options.clampWheel !== 'x') {\n            if (this.parent.screenWorldHeight < this.parent.screenHeight) {\n                switch (this.underflowY) {\n                    case -1:\n                        this.parent.y = 0\n                        break\n                    case 1:\n                        this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight)\n                        break\n                    default:\n                        this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2\n                }\n            }\n            else {\n                if (this.parent.top < 0) {\n                    this.parent.y = 0\n                    decelerate.y = 0\n                }\n                if (this.parent.bottom > this.parent.worldHeight) {\n                    this.parent.y = -this.parent.worldHeight * this.parent.scale.y + this.parent.screenHeight\n                    decelerate.y = 0\n                }\n            }\n        }\n    }\n}\n","import { Plugin } from './plugin'\r\n\r\n/**\r\n * @typedef {object} PinchOptions\r\n * @property {boolean} [noDrag] disable two-finger dragging\r\n * @property {number} [percent=1.0] percent to modify pinch speed\r\n * @property {PIXI.Point} [center] place this point at center during zoom instead of center of two fingers\r\n */\r\n\r\nconst pinchOptions = {\r\n    noDrag: false,\r\n    percent: 1.0,\r\n    center: null\r\n}\r\n\r\nexport class Pinch extends Plugin {\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {PinchOptions} [options]\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent)\r\n        this.options = Object.assign({}, pinchOptions, options)\r\n    }\r\n\r\n    down() {\r\n        if (this.parent.input.count() >= 2) {\r\n            this.active = true\r\n            return true\r\n        }\r\n    }\r\n\r\n    move(e) {\r\n        if (this.paused || !this.active) {\r\n            return\r\n        }\r\n\r\n        const x = e.data.global.x\r\n        const y = e.data.global.y\r\n\r\n        const pointers = this.parent.input.touches\r\n        if (pointers.length >= 2) {\r\n            const first = pointers[0]\r\n            const second = pointers[1]\r\n            const last = (first.last && second.last) ? Math.sqrt(Math.pow(second.last.x - first.last.x, 2) + Math.pow(second.last.y - first.last.y, 2)) : null\r\n            if (first.id === e.data.pointerId) {\r\n                first.last = { x, y, data: e.data }\r\n            }\r\n            else if (second.id === e.data.pointerId) {\r\n                second.last = { x, y, data: e.data }\r\n            }\r\n            if (last) {\r\n                let oldPoint\r\n                const point = { x: first.last.x + (second.last.x - first.last.x) / 2, y: first.last.y + (second.last.y - first.last.y) / 2 }\r\n                if (!this.options.center) {\r\n                    oldPoint = this.parent.toLocal(point)\r\n                }\r\n                let dist = Math.sqrt(Math.pow(second.last.x - first.last.x, 2) + Math.pow(second.last.y - first.last.y, 2))\r\n                dist = dist === 0 ? dist = 0.0000000001 : dist\r\n                const change = (1 - last / dist) * this.options.percent * this.parent.scale.x\r\n                this.parent.scale.x += change\r\n                this.parent.scale.y += change\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'pinch' })\r\n                const clamp = this.parent.plugins.get('clamp-zoom', true)\r\n                if (clamp) {\r\n                    clamp.clamp()\r\n                }\r\n                if (this.options.center) {\r\n                    this.parent.moveCenter(this.options.center)\r\n                }\r\n                else {\r\n                    const newPoint = this.parent.toGlobal(oldPoint)\r\n                    this.parent.x += point.x - newPoint.x\r\n                    this.parent.y += point.y - newPoint.y\r\n                    this.parent.emit('moved', { viewport: this.parent, type: 'pinch' })\r\n                }\r\n                if (!this.options.noDrag && this.lastCenter) {\r\n                    this.parent.x += point.x - this.lastCenter.x\r\n                    this.parent.y += point.y - this.lastCenter.y\r\n                    this.parent.emit('moved', { viewport: this.parent, type: 'pinch' })\r\n                }\r\n                this.lastCenter = point\r\n                this.moved = true\r\n            }\r\n            else {\r\n                if (!this.pinching) {\r\n                    this.parent.emit('pinch-start', this.parent)\r\n                    this.pinching = true\r\n                }\r\n            }\r\n            return true\r\n        }\r\n    }\r\n\r\n    up() {\r\n        if (this.pinching) {\r\n            if (this.parent.input.touches.length <= 1) {\r\n                this.active = false\r\n                this.lastCenter = null\r\n                this.pinching = false\r\n                this.moved = false\r\n                this.parent.emit('pinch-end', this.parent)\r\n                return true\r\n            }\r\n        }\r\n    }\r\n}","import { Plugin } from './plugin'\r\n\r\n/**\r\n * @typedef ClampOptions\r\n * @property {(number|boolean)} [left=false] clamp left; true = 0\r\n * @property {(number|boolean)} [right=false] clamp right; true = viewport.worldWidth\r\n * @property {(number|boolean)} [top=false] clamp top; true = 0\r\n * @property {(number|boolean)} [bottom=false] clamp bottom; true = viewport.worldHeight\r\n * @property {string} [direction] (all, x, or y) using clamps of [0, viewport.worldWidth/viewport.worldHeight]; replaces left/right/top/bottom if set\r\n * @property {string} [underflow=center] where to place world if too small for screen (e.g., top-right, center, none, bottomleft)\r\n */\r\n\r\nconst clampOptions =\r\n{\r\n    left: false,\r\n    right: false,\r\n    top: false,\r\n    bottom: false,\r\n    direction: null,\r\n    underflow: 'center'\r\n}\r\n\r\nexport class Clamp extends Plugin\r\n{\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {ClampOptions} [options]\r\n     */\r\n    constructor(parent, options={})\r\n    {\r\n        super(parent)\r\n        this.options = Object.assign({}, clampOptions, options)\r\n        if (this.options.direction)\r\n        {\r\n            this.options.left = this.options.direction === 'x' || this.options.direction === 'all' ? true : null\r\n            this.options.right = this.options.direction === 'x' || this.options.direction === 'all' ? true : null\r\n            this.options.top = this.options.direction === 'y' || this.options.direction === 'all' ? true : null\r\n            this.options.bottom = this.options.direction === 'y' || this.options.direction === 'all' ? true : null\r\n        }\r\n        this.parseUnderflow()\r\n        this.last = { x: null, y: null, scaleX: null, scaleY: null }\r\n        this.update()\r\n    }\r\n\r\n    parseUnderflow()\r\n    {\r\n        const clamp = this.options.underflow.toLowerCase()\r\n        if (clamp === 'none')\r\n        {\r\n            this.noUnderflow = true\r\n        }\r\n        else if (clamp === 'center')\r\n        {\r\n            this.underflowX = this.underflowY = 0\r\n            this.noUnderflow = false\r\n        }\r\n        else\r\n        {\r\n            this.underflowX = (clamp.indexOf('left') !== -1) ? -1 : (clamp.indexOf('right') !== -1) ? 1 : 0\r\n            this.underflowY = (clamp.indexOf('top') !== -1) ? -1 : (clamp.indexOf('bottom') !== -1) ? 1 : 0\r\n            this.noUnderflow = false\r\n        }\r\n    }\r\n\r\n    /**\r\n     * handle move events\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    move()\r\n    {\r\n        this.update()\r\n        return false\r\n    }\r\n\r\n    update()\r\n    {\r\n        if (this.paused)\r\n        {\r\n            return\r\n        }\r\n\r\n        // only clamp on change\r\n        if (this.parent.x === this.last.x && this.parent.y === this.last.y && this.parent.scale.x === this.last.scaleX && this.parent.scale.y === this.last.scaleY)\r\n        {\r\n            return\r\n        }\r\n        const original = { x: this.parent.x, y: this.parent.y }\r\n        const decelerate = this.parent.plugins['decelerate'] || {}\r\n        if (this.options.left !== null || this.options.right !== null)\r\n        {\r\n            let moved = false\r\n            if (this.parent.screenWorldWidth < this.parent.screenWidth)\r\n            {\r\n                if (!this.noUnderflow)\r\n                {\r\n                    switch (this.underflowX)\r\n                    {\r\n                        case -1:\r\n                            if (this.parent.x !== 0)\r\n                            {\r\n                                this.parent.x = 0\r\n                                moved = true\r\n                            }\r\n                            break\r\n                        case 1:\r\n                            if (this.parent.x !== this.parent.screenWidth - this.parent.screenWorldWidth)\r\n                            {\r\n                                this.parent.x = this.parent.screenWidth - this.parent.screenWorldWidth\r\n                                moved = true\r\n                            }\r\n                            break\r\n                        default:\r\n                            if (this.parent.x !== (this.parent.screenWidth - this.parent.screenWorldWidth) / 2)\r\n                            {\r\n                                this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2\r\n                                moved = true\r\n                            }\r\n                    }\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if (this.options.left !== null)\r\n                {\r\n                    if (this.parent.left < (this.options.left === true ? 0 : this.options.left))\r\n                    {\r\n                        this.parent.x = -(this.options.left === true ? 0 : this.options.left) * this.parent.scale.x\r\n                        decelerate.x = 0\r\n                        moved = true\r\n                    }\r\n                }\r\n                if (this.options.right !== null)\r\n                {\r\n                    if (this.parent.right > (this.options.right === true ? this.parent.worldWidth : this.options.right))\r\n                    {\r\n                        this.parent.x = -(this.options.right === true ? this.parent.worldWidth : this.options.right) * this.parent.scale.x + this.parent.screenWidth\r\n                        decelerate.x = 0\r\n                        moved = true\r\n                    }\r\n                }\r\n            }\r\n            if (moved)\r\n            {\r\n                this.parent.emit('moved', { viewport: this.parent, original, type: 'clamp-x' })\r\n            }\r\n        }\r\n        if (this.options.top !== null || this.options.bottom !== null)\r\n        {\r\n            let moved = false\r\n            if (this.parent.screenWorldHeight < this.parent.screenHeight)\r\n            {\r\n                if (!this.noUnderflow)\r\n                {\r\n                    switch (this.underflowY)\r\n                    {\r\n                        case -1:\r\n                            if (this.parent.y !== 0)\r\n                            {\r\n                                this.parent.y = 0\r\n                                moved = true\r\n                            }\r\n                            break\r\n                        case 1:\r\n                            if (this.parent.y !== this.parent.screenHeight - this.parent.screenWorldHeight)\r\n                            {\r\n                                this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight)\r\n                                moved = true\r\n                            }\r\n                            break\r\n                        default:\r\n                            if (this.parent.y !== (this.parent.screenHeight - this.parent.screenWorldHeight) / 2)\r\n                            {\r\n                                this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2\r\n                                moved = true\r\n                            }\r\n                    }\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if (this.options.top !== null)\r\n                {\r\n                    if (this.parent.top < (this.options.top === true ? 0 : this.options.top))\r\n                    {\r\n                        this.parent.y = -(this.options.top === true ? 0 : this.options.top) * this.parent.scale.y\r\n                        decelerate.y = 0\r\n                        moved = true\r\n                    }\r\n                }\r\n                if (this.options.bottom !== null)\r\n                {\r\n                    if (this.parent.bottom > (this.options.bottom === true ? this.parent.worldHeight : this.options.bottom))\r\n                    {\r\n                        this.parent.y = -(this.options.bottom === true ? this.parent.worldHeight : this.options.bottom) * this.parent.scale.y + this.parent.screenHeight\r\n                        decelerate.y = 0\r\n                        moved = true\r\n                    }\r\n                }\r\n            }\r\n            if (moved)\r\n            {\r\n                this.parent.emit('moved', { viewport: this.parent, original, type: 'clamp-y' })\r\n            }\r\n        }\r\n        this.last.x = this.parent.x\r\n        this.last.y = this.parent.y\r\n        this.last.scaleX = this.parent.scale.x\r\n        this.last.scaleY = this.parent.scale.y\r\n    }\r\n\r\n    reset() \r\n    {\r\n        this.update();\r\n    }\r\n}\r\n","import { Plugin } from './plugin'\r\n\r\n/**\r\n * use either minimum width/height or minimum scale\r\n * @typedef {object} ClampZoomOptions\r\n * @property {number} [minWidth] minimum width\r\n * @property {number} [minHeight] minimum height\r\n * @property {number} [maxWidth] maximum width\r\n * @property {number} [maxHeight] maximum height\r\n * @property {number} [minScale] minimum scale\r\n * @property {number} [maxScale] minimum scale\r\n */\r\n\r\nconst clampZoomOptions = {\r\n    minWidth: null,\r\n    minHeight: null,\r\n    maxWidth: null,\r\n    maxHeight: null,\r\n    minScale: null,\r\n    maxScale: null\r\n}\r\n\r\nexport class ClampZoom extends Plugin\r\n{\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {ClampZoomOptions} [options]\r\n     */\r\n    constructor(parent, options={})\r\n    {\r\n        super(parent)\r\n        this.options = Object.assign({}, clampZoomOptions, options)\r\n        this.clamp()\r\n    }\r\n\r\n    resize()\r\n    {\r\n        this.clamp()\r\n    }\r\n\r\n    clamp()\r\n    {\r\n        if (this.paused)\r\n        {\r\n            return\r\n        }\r\n\r\n        if (this.options.minWidth || this.options.minHeight || this.options.maxWidth || this.options.maxHeight)\r\n        {\r\n            let width = this.parent.worldScreenWidth\r\n            let height = this.parent.worldScreenHeight\r\n            if (this.options.minWidth !== null && width < this.options.minWidth)\r\n            {\r\n                const original = this.parent.scale.x\r\n                this.parent.fitWidth(this.options.minWidth, false, false, true)\r\n                this.parent.scale.y *= this.parent.scale.x / original\r\n                width = this.parent.worldScreenWidth\r\n                height = this.parent.worldScreenHeight\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'clamp-zoom' })\r\n            }\r\n            if (this.options.maxWidth !== null && width > this.options.maxWidth)\r\n            {\r\n                const original = this.parent.scale.x\r\n                this.parent.fitWidth(this.options.maxWidth, false, false, true)\r\n                this.parent.scale.y *= this.parent.scale.x / original\r\n                width = this.parent.worldScreenWidth\r\n                height = this.parent.worldScreenHeight\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'clamp-zoom' })\r\n            }\r\n            if (this.options.minHeight !== null && height < this.options.minHeight)\r\n            {\r\n                const original = this.parent.scale.y\r\n                this.parent.fitHeight(this.options.minHeight, false, false, true)\r\n                this.parent.scale.x *= this.parent.scale.y / original\r\n                width = this.parent.worldScreenWidth\r\n                height = this.parent.worldScreenHeight\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'clamp-zoom' })\r\n            }\r\n            if (this.options.maxHeight !== null && height > this.options.maxHeight)\r\n            {\r\n                const original = this.parent.scale.y\r\n                this.parent.fitHeight(this.options.maxHeight, false, false, true)\r\n                this.parent.scale.x *= this.parent.scale.y / original\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'clamp-zoom' })\r\n            }\r\n        }\r\n        else\r\n        {\r\n            let scale = this.parent.scale.x\r\n            if (this.options.minScale !== null && scale < this.options.minScale)\r\n            {\r\n                scale = this.options.minScale\r\n            }\r\n            if (this.options.maxScale !== null && scale > this.options.maxScale)\r\n            {\r\n                scale = this.options.maxScale\r\n            }\r\n            if (scale !== this.parent.scale.x) {\r\n                this.parent.scale.set(scale)\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'clamp-zoom' })\r\n            }\r\n        }\r\n    }\r\n\r\n    reset()\r\n    {\r\n        this.clamp()\r\n    }\r\n}\r\n","import { Plugin } from './plugin'\r\n\r\n/**\r\n * @typedef {object} DecelerateOptions\r\n * @property {number} [friction=0.95] percent to decelerate after movement\r\n * @property {number} [bounce=0.8] percent to decelerate when past boundaries (only applicable when viewport.bounce() is active)\r\n * @property {number} [minSpeed=0.01] minimum velocity before stopping/reversing acceleration\r\n */\r\n\r\nconst decelerateOptions = {\r\n    friction: 0.95,\r\n    bounce: 0.8,\r\n    minSpeed: 0.01\r\n}\r\n\r\nexport class Decelerate extends Plugin {\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {DecelerateOptions} [options]\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent)\r\n        this.options = Object.assign({}, decelerateOptions, options)\r\n        this.saved = []\r\n        this.reset()\r\n        this.parent.on('moved', data => this.moved(data))\r\n    }\r\n\r\n    destroy() {\r\n        this.parent\r\n    }\r\n\r\n    down() {\r\n        this.saved = []\r\n        this.x = this.y = false\r\n    }\r\n\r\n    isActive() {\r\n        return this.x || this.y\r\n    }\r\n\r\n    move() {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n\r\n        const count = this.parent.input.count()\r\n        if (count === 1 || (count > 1 && !this.parent.plugins.get('pinch', true))) {\r\n            this.saved.push({ x: this.parent.x, y: this.parent.y, time: performance.now() })\r\n            if (this.saved.length > 60) {\r\n                this.saved.splice(0, 30)\r\n            }\r\n        }\r\n    }\r\n\r\n    moved(data) {\r\n        if (this.saved.length) {\r\n            const last = this.saved[this.saved.length - 1]\r\n            if (data.type === 'clamp-x') {\r\n                if (last.x === data.original.x) {\r\n                    last.x = this.parent.x\r\n                }\r\n            }\r\n            else if (data.type === 'clamp-y') {\r\n                if (last.y === data.original.y) {\r\n                    last.y = this.parent.y\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    up() {\r\n        if (this.parent.input.count() === 0 && this.saved.length) {\r\n            const now = performance.now()\r\n            for (let save of this.saved) {\r\n                if (save.time >= now - 100) {\r\n                    const time = now - save.time\r\n                    this.x = (this.parent.x - save.x) / time\r\n                    this.y = (this.parent.y - save.y) / time\r\n                    this.percentChangeX = this.percentChangeY = this.options.friction\r\n                    break\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * manually activate plugin\r\n     * @param {object} options\r\n     * @param {number} [options.x]\r\n     * @param {number} [options.y]\r\n     */\r\n    activate(options) {\r\n        options = options || {}\r\n        if (typeof options.x !== 'undefined') {\r\n            this.x = options.x\r\n            this.percentChangeX = this.options.friction\r\n        }\r\n        if (typeof options.y !== 'undefined') {\r\n            this.y = options.y\r\n            this.percentChangeY = this.options.friction\r\n        }\r\n    }\r\n\r\n    update(elapsed) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n\r\n        let moved\r\n        if (this.x) {\r\n            this.parent.x += this.x * elapsed\r\n            this.x *= this.percentChangeX\r\n            if (Math.abs(this.x) < this.options.minSpeed) {\r\n                this.x = 0\r\n            }\r\n            moved = true\r\n        }\r\n        if (this.y) {\r\n            this.parent.y += this.y * elapsed\r\n            this.y *= this.percentChangeY\r\n            if (Math.abs(this.y) < this.options.minSpeed) {\r\n                this.y = 0\r\n            }\r\n            moved = true\r\n        }\r\n        if (moved) {\r\n            this.parent.emit('moved', { viewport: this.parent, type: 'decelerate' })\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.x = this.y = null\r\n    }\r\n}","\n/*\n\tCopyright Â© 2001 Robert Penner\n\tAll rights reserved.\n\n\tRedistribution and use in source and binary forms, with or without modification, \n\tare permitted provided that the following conditions are met:\n\n\tRedistributions of source code must retain the above copyright notice, this list of \n\tconditions and the following disclaimer.\n\tRedistributions in binary form must reproduce the above copyright notice, this list \n\tof conditions and the following disclaimer in the documentation and/or other materials \n\tprovided with the distribution.\n\n\tNeither the name of the author nor the names of contributors may be used to endorse \n\tor promote products derived from this software without specific prior written permission.\n\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n\tEXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n\tMERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n\tCOPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\tEXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n\tGOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n\tAND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n\tNEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n\tOF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n(function() {\n  var penner, umd;\n\n  umd = function(factory) {\n    if (typeof exports === 'object') {\n      return module.exports = factory;\n    } else if (typeof define === 'function' && define.amd) {\n      return define([], factory);\n    } else {\n      return this.penner = factory;\n    }\n  };\n\n  penner = {\n    linear: function(t, b, c, d) {\n      return c * t / d + b;\n    },\n    easeInQuad: function(t, b, c, d) {\n      return c * (t /= d) * t + b;\n    },\n    easeOutQuad: function(t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    },\n    easeInOutQuad: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t + b;\n      } else {\n        return -c / 2 * ((--t) * (t - 2) - 1) + b;\n      }\n    },\n    easeInCubic: function(t, b, c, d) {\n      return c * (t /= d) * t * t + b;\n    },\n    easeOutCubic: function(t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t + 1) + b;\n    },\n    easeInOutCubic: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * t + 2) + b;\n      }\n    },\n    easeInQuart: function(t, b, c, d) {\n      return c * (t /= d) * t * t * t + b;\n    },\n    easeOutQuart: function(t, b, c, d) {\n      return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n    },\n    easeInOutQuart: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t * t + b;\n      } else {\n        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n      }\n    },\n    easeInQuint: function(t, b, c, d) {\n      return c * (t /= d) * t * t * t * t + b;\n    },\n    easeOutQuint: function(t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    easeInOutQuint: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t * t * t + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n      }\n    },\n    easeInSine: function(t, b, c, d) {\n      return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n    },\n    easeOutSine: function(t, b, c, d) {\n      return c * Math.sin(t / d * (Math.PI / 2)) + b;\n    },\n    easeInOutSine: function(t, b, c, d) {\n      return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n    },\n    easeInExpo: function(t, b, c, d) {\n      if (t === 0) {\n        return b;\n      } else {\n        return c * Math.pow(2, 10 * (t / d - 1)) + b;\n      }\n    },\n    easeOutExpo: function(t, b, c, d) {\n      if (t === d) {\n        return b + c;\n      } else {\n        return c * (-Math.pow(2, -10 * t / d) + 1) + b;\n      }\n    },\n    easeInOutExpo: function(t, b, c, d) {\n      if (t === 0) {\n        b;\n      }\n      if (t === d) {\n        b + c;\n      }\n      if ((t /= d / 2) < 1) {\n        return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n      } else {\n        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n      }\n    },\n    easeInCirc: function(t, b, c, d) {\n      return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n    },\n    easeOutCirc: function(t, b, c, d) {\n      return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n    },\n    easeInOutCirc: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n      } else {\n        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n      }\n    },\n    easeInElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) {\n        b;\n      } else if ((t /= d) === 1) {\n        b + c;\n      }\n      if (!p) {\n        p = d * .3;\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    },\n    easeOutElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) {\n        b;\n      } else if ((t /= d) === 1) {\n        b + c;\n      }\n      if (!p) {\n        p = d * .3;\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n    },\n    easeInOutElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) {\n        b;\n      } else if ((t /= d / 2) === 2) {\n        b + c;\n      }\n      if (!p) {\n        p = d * (.3 * 1.5);\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      if (t < 1) {\n        return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n      } else {\n        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;\n      }\n    },\n    easeInBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    easeOutBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    easeInOutBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      if ((t /= d / 2) < 1) {\n        return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n      }\n    },\n    easeInBounce: function(t, b, c, d) {\n      var v;\n      v = penner.easeOutBounce(d - t, 0, c, d);\n      return c - v + b;\n    },\n    easeOutBounce: function(t, b, c, d) {\n      if ((t /= d) < 1 / 2.75) {\n        return c * (7.5625 * t * t) + b;\n      } else if (t < 2 / 2.75) {\n        return c * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + b;\n      } else if (t < 2.5 / 2.75) {\n        return c * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + b;\n      } else {\n        return c * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + b;\n      }\n    },\n    easeInOutBounce: function(t, b, c, d) {\n      var v;\n      if (t < d / 2) {\n        v = penner.easeInBounce(t * 2, 0, c, d);\n        return v * .5 + b;\n      } else {\n        v = penner.easeOutBounce(t * 2 - d, 0, c, d);\n        return v * .5 + c * .5 + b;\n      }\n    }\n  };\n\n  umd(penner);\n\n}).call(this);\n","import Penner from 'penner'\r\n\r\n/**\r\n * returns correct Penner equation using string or Function\r\n * @param {(function|string)} [ease]\r\n * @param {defaults} default penner equation to use if none is provided\r\n */\r\nexport default function ease(ease, defaults)\r\n{\r\n    if (!ease)\r\n    {\r\n        return Penner[defaults]\r\n    }\r\n    else if (typeof ease === 'function')\r\n    {\r\n        return ease\r\n    }\r\n    else if (typeof ease === 'string')\r\n    {\r\n        return Penner[ease]\r\n    }\r\n}","import * as PIXI from 'pixi.js-legacy'\nimport { Plugin } from './plugin'\nimport ease from '../ease'\n\n/**\n * @typedef {options} BounceOptions\n * @property {string} [sides=all] all, horizontal, vertical, or combination of top, bottom, right, left (e.g., 'top-bottom-right')\n * @property {number} [friction=0.5] friction to apply to decelerate if active\n * @property {number} [time=150] time in ms to finish bounce\n * @property {object} [bounceBox] use this bounceBox instead of (0, 0, viewport.worldWidth, viewport.worldHeight)\n * @property {number} [bounceBox.x=0]\n * @property {number} [bounceBox.y=0]\n * @property {number} [bounceBox.width=viewport.worldWidth]\n * @property {number} [bounceBox.height=viewport.worldHeight]\n * @property {string|function} [ease=easeInOutSine] ease function or name (see http://easings.net/ for supported names)\n * @property {string} [underflow=center] (top/bottom/center and left/right/center, or center) where to place world if too small for screen\n */\n\nconst bounceOptions = {\n    sides: 'all',\n    friction: 0.5,\n    time: 150,\n    ease: 'easeInOutSine',\n    underflow: 'center',\n    bounceBox: null\n}\n\nexport class Bounce extends Plugin {\n    /**\n     * @private\n     * @param {Viewport} parent\n     * @param {BounceOptions} [options]\n     * @fires bounce-start-x\n     * @fires bounce.end-x\n     * @fires bounce-start-y\n     * @fires bounce-end-y\n     */\n    constructor(parent, options = {}) {\n        super(parent)\n        this.options = Object.assign({}, bounceOptions, options)\n        this.ease = ease(this.options.ease, 'easeInOutSine')\n        if (this.options.sides) {\n            if (this.options.sides === 'all') {\n                this.top = this.bottom = this.left = this.right = true\n            }\n            else if (this.options.sides === 'horizontal') {\n                this.right = this.left = true\n            }\n            else if (this.options.sides === 'vertical') {\n                this.top = this.bottom = true\n            }\n            else {\n                this.top = this.options.sides.indexOf('top') !== -1\n                this.bottom = this.options.sides.indexOf('bottom') !== -1\n                this.left = this.options.sides.indexOf('left') !== -1\n                this.right = this.options.sides.indexOf('right') !== -1\n            }\n        }\n        this.parseUnderflow()\n        this.last = {}\n        this.reset()\n    }\n\n    parseUnderflow() {\n        const clamp = this.options.underflow.toLowerCase()\n        if (clamp === 'center') {\n            this.underflowX = 0\n            this.underflowY = 0\n        }\n        else {\n            this.underflowX = (clamp.indexOf('left') !== -1) ? -1 : (clamp.indexOf('right') !== -1) ? 1 : 0\n            this.underflowY = (clamp.indexOf('top') !== -1) ? -1 : (clamp.indexOf('bottom') !== -1) ? 1 : 0\n        }\n    }\n\n    isActive() {\n        return this.toX !== null || this.toY !== null\n    }\n\n    down() {\n        this.toX = this.toY = null\n    }\n\n    up() {\n        this.bounce()\n    }\n\n    update(elapsed) {\n        if (this.paused) {\n            return\n        }\n\n        this.bounce()\n        if (this.toX) {\n            const toX = this.toX\n            toX.time += elapsed\n            this.parent.emit('moved', { viewport: this.parent, type: 'bounce-x' })\n            if (toX.time >= this.options.time) {\n                this.parent.x = toX.end\n                this.toX = null\n                this.parent.emit('bounce-x-end', this.parent)\n            }\n            else {\n                this.parent.x = this.ease(toX.time, toX.start, toX.delta, this.options.time)\n            }\n        }\n        if (this.toY) {\n            const toY = this.toY\n            toY.time += elapsed\n            this.parent.emit('moved', { viewport: this.parent, type: 'bounce-y' })\n            if (toY.time >= this.options.time) {\n                this.parent.y = toY.end\n                this.toY = null\n                this.parent.emit('bounce-y-end', this.parent)\n            }\n            else {\n                this.parent.y = this.ease(toY.time, toY.start, toY.delta, this.options.time)\n            }\n        }\n    }\n\n    calcUnderflowX() {\n        let x\n        switch (this.underflowX) {\n            case -1:\n                x = 0\n                break\n            case 1:\n                x = (this.parent.screenWidth - this.parent.screenWorldWidth)\n                break\n            default:\n                x = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2\n        }\n        return x\n    }\n\n    calcUnderflowY() {\n        let y\n        switch (this.underflowY) {\n            case -1:\n                y = 0\n                break\n            case 1:\n                y = (this.parent.screenHeight - this.parent.screenWorldHeight)\n                break\n            default:\n                y = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2\n        }\n        return y\n    }\n\n    oob() {\n        const box = this.options.bounceBox\n        if (box) {\n            const x1 = typeof box.x === 'undefined' ? 0 : box.x\n            const y1 = typeof box.y === 'undefined' ? 0 : box.y\n            const width = typeof box.width === 'undefined' ? this.parent.worldWidth : box.width\n            const height = typeof box.height === 'undefined' ? this.parent.worldHeight : box.height\n            return {\n                left: this.parent.left < x1,\n                right: this.parent.right > width,\n                top: this.parent.top < y1,\n                bottom: this.parent.bottom > height,\n                topLeft: new PIXI.Point(\n                    x1 * this.parent.scale.x,\n                    y1 * this.parent.scale.y\n                ),\n                bottomRight: new PIXI.Point(\n                    width * this.parent.scale.x - this.parent.screenWidth,\n                    height * this.parent.scale.y - this.parent.screenHeight\n                )\n            }\n        }\n        return {\n            left: this.parent.left < 0,\n            right: this.parent.right > this.parent.worldWidth,\n            top: this.parent.top < 0,\n            bottom: this.parent.bottom > this.parent.worldHeight,\n            topLeft: new PIXI.Point(0, 0),\n            bottomRight: new PIXI.Point(\n                this.parent.worldWidth * this.parent.scale.x - this.parent.screenWidth,\n                this.parent.worldHeight * this.parent.scale.y - this.parent.screenHeight\n            )\n        }\n    }\n\n    bounce() {\n        if (this.paused) {\n            return\n        }\n\n        let oob\n        let decelerate = this.parent.plugins.get('decelerate', true)\n        if (decelerate && (decelerate.x || decelerate.y)) {\n            if ((decelerate.x && decelerate.percentChangeX === decelerate.options.friction) || (decelerate.y && decelerate.percentChangeY === decelerate.options.friction)) {\n                oob = this.oob()\n                if ((oob.left && this.left) || (oob.right && this.right)) {\n                    decelerate.percentChangeX = this.options.friction\n                }\n                if ((oob.top && this.top) || (oob.bottom && this.bottom)) {\n                    decelerate.percentChangeY = this.options.friction\n                }\n            }\n        }\n        const drag = this.parent.plugins.get('drag', true) || {}\n        const pinch = this.parent.plugins.get('pinch', true) || {}\n        decelerate = decelerate || {}\n        if (!drag.active && !pinch.active && ((!this.toX || !this.toY) && (!decelerate.x || !decelerate.y))) {\n            oob = oob || this.oob()\n            const topLeft = oob.topLeft\n            const bottomRight = oob.bottomRight\n            if (!this.toX && !decelerate.x) {\n                let x = null\n                if (oob.left && this.left) {\n                    x = (this.parent.screenWorldWidth < this.parent.screenWidth) ? this.calcUnderflowX() : -topLeft.x\n                }\n                else if (oob.right && this.right) {\n                    x = (this.parent.screenWorldWidth < this.parent.screenWidth) ? this.calcUnderflowX() : -bottomRight.x\n                }\n                if (x !== null && this.parent.x !== x) {\n                    this.toX = { time: 0, start: this.parent.x, delta: x - this.parent.x, end: x }\n                    this.parent.emit('bounce-x-start', this.parent)\n                }\n            }\n            if (!this.toY && !decelerate.y) {\n                let y = null\n                if (oob.top && this.top) {\n                    y = (this.parent.screenWorldHeight < this.parent.screenHeight) ? this.calcUnderflowY() : -topLeft.y\n                }\n                else if (oob.bottom && this.bottom) {\n                    y = (this.parent.screenWorldHeight < this.parent.screenHeight) ? this.calcUnderflowY() : -bottomRight.y\n                }\n                if (y !== null && this.parent.y !== y) {\n                    this.toY = { time: 0, start: this.parent.y, delta: y - this.parent.y, end: y }\n                    this.parent.emit('bounce-y-start', this.parent)\n                }\n            }\n        }\n    }\n\n    reset() {\n        this.toX = this.toY = null\n        this.bounce()\n    }\n}","import { Plugin } from './plugin'\r\nimport ease from '../ease'\r\n\r\n/**\r\n * @typedef SnapOptions\r\n * @property {boolean} [topLeft] snap to the top-left of viewport instead of center\r\n * @property {number} [friction=0.8] friction/frame to apply if decelerate is active\r\n * @property {number} [time=1000]\r\n * @property {string|function} [ease=easeInOutSine] ease function or name (see http://easings.net/ for supported names)\r\n * @property {boolean} [interrupt=true] pause snapping with any user input on the viewport\r\n * @property {boolean} [removeOnComplete] removes this plugin after snapping is complete\r\n * @property {boolean} [removeOnInterrupt] removes this plugin if interrupted by any user input\r\n * @property {boolean} [forceStart] starts the snap immediately regardless of whether the viewport is at the desired location\r\n */\r\n\r\nconst snapOptions = {\r\n    topLeft: false,\r\n    friction: 0.8,\r\n    time: 1000,\r\n    ease: 'easeInOutSine',\r\n    interrupt: true,\r\n    removeOnComplete: false,\r\n    removeOnInterrupt: false,\r\n    forceStart: false\r\n}\r\n\r\nexport class Snap extends Plugin {\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {SnapOptions} [options]\r\n     * @event snap-start(Viewport) emitted each time a snap animation starts\r\n     * @event snap-restart(Viewport) emitted each time a snap resets because of a change in viewport size\r\n     * @event snap-end(Viewport) emitted each time snap reaches its target\r\n     * @event snap-remove(Viewport) emitted if snap plugin is removed\r\n     */\r\n    constructor(parent, x, y, options = {}) {\r\n        super(parent)\r\n        this.options = Object.assign({}, snapOptions, options)\r\n        this.ease = ease(options.ease, 'easeInOutSine')\r\n        this.x = x\r\n        this.y = y\r\n        if (this.options.forceStart) {\r\n            this.snapStart()\r\n        }\r\n    }\r\n\r\n    snapStart() {\r\n        this.percent = 0\r\n        this.snapping = { time: 0 }\r\n        const current = this.options.topLeft ? this.parent.corner : this.parent.center\r\n        this.deltaX = this.x - current.x\r\n        this.deltaY = this.y - current.y\r\n        this.startX = current.x\r\n        this.startY = current.y\r\n        this.parent.emit('snap-start', this.parent)\r\n    }\r\n\r\n    wheel() {\r\n        if (this.options.removeOnInterrupt) {\r\n            this.parent.plugins.remove('snap')\r\n        }\r\n    }\r\n\r\n    down() {\r\n        if (this.options.removeOnInterrupt) {\r\n            this.parent.plugins.remove('snap')\r\n        }\r\n        else if (this.options.interrupt) {\r\n            this.snapping = null\r\n        }\r\n    }\r\n\r\n    up() {\r\n        if (this.parent.input.count() === 0) {\r\n            const decelerate = this.parent.plugins.get('decelerate', true)\r\n            if (decelerate && (decelerate.x || decelerate.y)) {\r\n                decelerate.percentChangeX = decelerate.percentChangeY = this.options.friction\r\n            }\r\n        }\r\n    }\r\n\r\n    update(elapsed) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        if (this.options.interrupt && this.parent.input.count() !== 0) {\r\n            return\r\n        }\r\n        if (!this.snapping) {\r\n            const current = this.options.topLeft ? this.parent.corner : this.parent.center\r\n            if (current.x !== this.x || current.y !== this.y) {\r\n                this.snapStart()\r\n            }\r\n        }\r\n        else {\r\n            const snapping = this.snapping\r\n            snapping.time += elapsed\r\n            let finished, x, y\r\n            if (snapping.time > this.options.time) {\r\n                finished = true\r\n                x = this.startX + this.deltaX\r\n                y = this.startY + this.deltaY\r\n            }\r\n            else {\r\n                const percent = this.ease(snapping.time, 0, 1, this.options.time)\r\n                x = this.startX + this.deltaX * percent\r\n                y = this.startY + this.deltaY * percent\r\n            }\r\n            if (this.options.topLeft) {\r\n                this.parent.moveCorner(x, y)\r\n            }\r\n            else {\r\n                this.parent.moveCenter(x, y)\r\n            }\r\n            this.parent.emit('moved', { viewport: this.parent, type: 'snap' })\r\n            if (finished) {\r\n                if (this.options.removeOnComplete) {\r\n                    this.parent.plugins.remove('snap')\r\n                }\r\n                this.parent.emit('snap-end', this.parent)\r\n                this.snapping = null\r\n            }\r\n        }\r\n    }\r\n}","import { Plugin } from './plugin'\r\nimport ease from '../ease'\r\n\r\n/**\r\n * @typedef {Object} SnapZoomOptions\r\n * @property {number} [width=0] the desired width to snap (to maintain aspect ratio, choose only width or height)\r\n * @property {number} [height=0] the desired height to snap (to maintain aspect ratio, choose only width or height)\r\n * @property {number} [time=1000] time for snapping in ms\r\n * @property {(string|function)} [ease=easeInOutSine] ease function or name (see http://easings.net/ for supported names)\r\n * @property {PIXI.Point} [center] place this point at center during zoom instead of center of the viewport\r\n * @property {boolean} [interrupt=true] pause snapping with any user input on the viewport\r\n * @property {boolean} [removeOnComplete] removes this plugin after snapping is complete\r\n * @property {boolean} [removeOnInterrupt] removes this plugin if interrupted by any user input\r\n * @property {boolean} [forceStart] starts the snap immediately regardless of whether the viewport is at the desired zoom\r\n * @property {boolean} [noMove] zoom but do not move\r\n */\r\n\r\nconst snapZoomOptions = {\r\n    width: 0,\r\n    height: 0,\r\n    time: 1000,\r\n    ease: 'easeInOutSine',\r\n    center: null,\r\n    interrupt: true,\r\n    removeOnComplete: false,\r\n    removeOnInterrupts: false,\r\n    forceStart: false,\r\n    noMove: false\r\n}\r\n\r\nexport class SnapZoom extends Plugin {\r\n    /**\r\n     * @param {Viewport} parent\r\n     * @param {SnapZoomOptions} options\r\n     * @event snap-zoom-start(Viewport) emitted each time a fit animation starts\r\n     * @event snap-zoom-end(Viewport) emitted each time fit reaches its target\r\n     * @event snap-zoom-end(Viewport) emitted each time fit reaches its target\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent)\r\n        this.options = Object.assign({}, snapZoomOptions, options)\r\n        this.ease = ease(this.options.ease)\r\n        if (this.options.width > 0) {\r\n            this.xScale = parent.screenWidth / this.options.width\r\n        }\r\n        if (this.options.height > 0) {\r\n            this.yScale = parent.screenHeight / this.options.height\r\n        }\r\n        this.xIndependent = this.xScale ? true : false\r\n        this.yIndependent = this.yScale ? true : false\r\n        this.xScale = this.xIndependent ? this.xScale : this.yScale\r\n        this.yScale = this.yIndependent ? this.yScale : this.xScale\r\n\r\n        if (this.options.time === 0) {\r\n            parent.container.scale.x = this.xScale\r\n            parent.container.scale.y = this.yScale\r\n            if (this.options.removeOnComplete) {\r\n                this.parent.plugins.remove('snap-zoom')\r\n            }\r\n        }\r\n        else if (options.forceStart) {\r\n            this.createSnapping()\r\n        }\r\n    }\r\n\r\n    createSnapping() {\r\n        const scale = this.parent.scale\r\n        this.snapping = { time: 0, startX: scale.x, startY: scale.y, deltaX: this.xScale - scale.x, deltaY: this.yScale - scale.y }\r\n        this.parent.emit('snap-zoom-start', this.parent)\r\n    }\r\n\r\n    resize() {\r\n        this.snapping = null\r\n\r\n        if (this.options.width > 0) {\r\n            this.xScale = this.parent.screenWidth / this.options.width\r\n        }\r\n        if (this.options.height > 0) {\r\n            this.yScale = this.parent.screenHeight / this.options.height\r\n        }\r\n        this.xScale = this.xIndependent ? this.xScale : this.yScale\r\n        this.yScale = this.yIndependent ? this.yScale : this.xScale\r\n    }\r\n\r\n    wheel() {\r\n        if (this.options.removeOnInterrupt) {\r\n            this.parent.plugins.remove('snap-zoom')\r\n        }\r\n    }\r\n\r\n    down() {\r\n        if (this.options.removeOnInterrupt) {\r\n            this.parent.plugins.remove('snap-zoom')\r\n        }\r\n        else if (this.options.interrupt) {\r\n            this.snapping = null\r\n        }\r\n    }\r\n\r\n    update(elapsed) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        if (this.options.interrupt && this.parent.input.count() !== 0) {\r\n            return\r\n        }\r\n\r\n        let oldCenter\r\n        if (!this.options.center && !this.options.noMove) {\r\n            oldCenter = this.parent.center\r\n        }\r\n        if (!this.snapping) {\r\n            if (this.parent.scale.x !== this.xScale || this.parent.scale.y !== this.yScale) {\r\n                this.createSnapping()\r\n            }\r\n        }\r\n        else if (this.snapping) {\r\n            const snapping = this.snapping\r\n            snapping.time += elapsed\r\n            if (snapping.time >= this.options.time) {\r\n                this.parent.scale.set(this.xScale, this.yScale)\r\n                if (this.options.removeOnComplete) {\r\n                    this.parent.plugins.remove('snap-zoom')\r\n                }\r\n                this.parent.emit('snap-zoom-end', this.parent)\r\n                this.snapping = null\r\n            }\r\n            else {\r\n                const snapping = this.snapping\r\n                this.parent.scale.x = this.ease(snapping.time, snapping.startX, snapping.deltaX, this.options.time)\r\n                this.parent.scale.y = this.ease(snapping.time, snapping.startY, snapping.deltaY, this.options.time)\r\n            }\r\n            const clamp = this.parent.plugins.get('clamp-zoom', true)\r\n            if (clamp) {\r\n                clamp.clamp()\r\n            }\r\n            if (!this.options.noMove) {\r\n                if (!this.options.center) {\r\n                    this.parent.moveCenter(oldCenter)\r\n                }\r\n                else {\r\n                    this.parent.moveCenter(this.options.center)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    resume() {\r\n        this.snapping = null\r\n        super.resume()\r\n    }\r\n}","import { Plugin } from './plugin'\r\n\r\n/**\r\n * @typedef {object} FollowOptions\r\n * @property {number} [speed=0] to follow in pixels/frame (0=teleport to location)\r\n * @property {number} [acceleration] set acceleration to accelerate and decelerate at this rate; speed cannot be 0 to use acceleration\r\n * @property {number} [radius] radius (in world coordinates) of center circle where movement is allowed without moving the viewport\r\n */\r\n\r\nconst followOptions = {\r\n    speed: 0,\r\n    acceleration: null,\r\n    radius: null\r\n}\r\n\r\nexport class Follow extends Plugin\r\n{\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {PIXI.DisplayObject} target to follow\r\n     * @param {FollowOptions} [options]\r\n     */\r\n    constructor(parent, target, options = {})\r\n    {\r\n        super(parent)\r\n        this.target = target\r\n        this.options = Object.assign({}, followOptions, options)\r\n        this.velocity = { x: 0, y: 0 }\r\n    }\r\n\r\n    update(elapsed)\r\n    {\r\n        if (this.paused)\r\n        {\r\n            return\r\n        }\r\n\r\n        const center = this.parent.center\r\n        let toX = this.target.x,\r\n            toY = this.target.y\r\n        if (this.options.radius)\r\n        {\r\n            const distance = Math.sqrt(Math.pow(this.target.y - center.y, 2) + Math.pow(this.target.x - center.x, 2))\r\n            if (distance > this.options.radius)\r\n            {\r\n                const angle = Math.atan2(this.target.y - center.y, this.target.x - center.x)\r\n                toX = this.target.x - Math.cos(angle) * this.options.radius\r\n                toY = this.target.y - Math.sin(angle) * this.options.radius\r\n            }\r\n            else\r\n            {\r\n                return\r\n            }\r\n        }\r\n\r\n        const deltaX = toX - center.x\r\n        const deltaY = toY - center.y\r\n        if (deltaX || deltaY)\r\n        {\r\n            if (this.options.speed)\r\n            {\r\n                if (this.options.acceleration)\r\n                {\r\n                    const angle = Math.atan2(toY - center.y, toX - center.x)\r\n                    const distance = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2))\r\n                    if (distance)\r\n                    {\r\n                        const decelerationDistance = (Math.pow(this.velocity.x, 2) + Math.pow(this.velocity.y, 2)) / (2 * this.options.acceleration)\r\n                        if (distance > decelerationDistance)\r\n                        {\r\n                            this.velocity = {\r\n                                x: Math.min(this.velocity.x + this.options.acceleration * elapsed, this.options.speed),\r\n                                y: Math.min(this.velocity.y + this.options.acceleration * elapsed, this.options.speed)\r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            this.velocity = {\r\n                                x: Math.max(this.velocity.x - this.options.acceleration * this.options.speed, 0),\r\n                                y: Math.max(this.velocity.y - this.options.acceleration * this.options.speed, 0)\r\n                            }\r\n                        }\r\n                        const changeX = Math.cos(angle) * this.velocity.x\r\n                        const changeY = Math.sin(angle) * this.velocity.y\r\n                        const x = Math.abs(changeX) > Math.abs(deltaX) ? toX : center.x + changeX\r\n                        const y = Math.abs(changeY) > Math.abs(deltaY) ? toY : center.y + changeY\r\n                        this.parent.moveCenter(x, y)\r\n                        this.parent.emit('moved', { viewport: this.parent, type: 'follow' })\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    const angle = Math.atan2(toY - center.y, toX - center.x)\r\n                    const changeX = Math.cos(angle) * this.options.speed\r\n                    const changeY = Math.sin(angle) * this.options.speed\r\n                    const x = Math.abs(changeX) > Math.abs(deltaX) ? toX : center.x + changeX\r\n                    const y = Math.abs(changeY) > Math.abs(deltaY) ? toY : center.y + changeY\r\n                    this.parent.moveCenter(x, y)\r\n                    this.parent.emit('moved', { viewport: this.parent, type: 'follow' })\r\n                }\r\n            }\r\n            else\r\n            {\r\n                this.parent.moveCenter(toX, toY)\r\n                this.parent.emit('moved', { viewport: this.parent, type: 'follow' })\r\n            }\r\n        }\r\n    }\r\n}","import { Plugin } from './plugin'\r\n\r\n/**\r\n * the default event listener for 'wheel' event is document.body. Use `Viewport.options.divWheel` to change this default\r\n * @typedef WheelOptions\r\n * @property {number} [percent=0.1] percent to scroll with each spin\r\n * @property {number} [smooth] smooth the zooming by providing the number of frames to zoom between wheel spins\r\n * @property {boolean} [interrupt=true] stop smoothing with any user input on the viewport\r\n * @property {boolean} [reverse] reverse the direction of the scroll\r\n * @property {PIXI.Point} [center] place this point at center during zoom instead of current mouse position\r\n * @property {number} [lineHeight=20] scaling factor for non-DOM_DELTA_PIXEL scrolling events\r\n */\r\n\r\nconst wheelOptions = {\r\n    percent: 0.1,\r\n    smooth: false,\r\n    interrupt: true,\r\n    reverse: false,\r\n    center: null,\r\n    lineHeight: 20\r\n}\r\n\r\nexport class Wheel extends Plugin {\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {WheelOptions} [options]\r\n     * @event wheel({wheel: {dx, dy, dz}, event, viewport})\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent)\r\n        this.options = Object.assign({}, wheelOptions, options)\r\n    }\r\n\r\n    down() {\r\n        if (this.options.interrupt) {\r\n            this.smoothing = null\r\n        }\r\n    }\r\n\r\n    update() {\r\n        if (this.smoothing) {\r\n            const point = this.smoothingCenter\r\n            const change = this.smoothing\r\n            let oldPoint\r\n            if (!this.options.center) {\r\n                oldPoint = this.parent.toLocal(point)\r\n            }\r\n            this.parent.scale.x += change.x\r\n            this.parent.scale.y += change.y\r\n            this.parent.emit('zoomed', { viewport: this.parent, type: 'wheel' })\r\n            const clamp = this.parent.plugins.get('clamp-zoom', true)\r\n            if (clamp) {\r\n                clamp.clamp()\r\n            }\r\n            if (this.options.center) {\r\n                this.parent.moveCenter(this.options.center)\r\n            }\r\n            else {\r\n                const newPoint = this.parent.toGlobal(oldPoint)\r\n                this.parent.x += point.x - newPoint.x\r\n                this.parent.y += point.y - newPoint.y\r\n            }\r\n            this.parent.emit('moved', { viewport: this.parent, type: 'wheel' })\r\n            this.smoothingCount++\r\n            if (this.smoothingCount >= this.options.smooth) {\r\n                this.smoothing = null\r\n            }\r\n        }\r\n    }\r\n\r\n    wheel(e) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n\r\n        let point = this.parent.input.getPointerPosition(e)\r\n        const sign = this.options.reverse ? -1 : 1\r\n        const step = sign * -e.deltaY * (e.deltaMode ? this.options.lineHeight : 1) / 500\r\n        const change = Math.pow(2, (1 + this.options.percent) * step)\r\n        if (this.options.smooth) {\r\n            const original = {\r\n                x: this.smoothing ? this.smoothing.x * (this.options.smooth - this.smoothingCount) : 0,\r\n                y: this.smoothing ? this.smoothing.y * (this.options.smooth - this.smoothingCount) : 0\r\n            }\r\n            this.smoothing = {\r\n                x: ((this.parent.scale.x + original.x) * change - this.parent.scale.x) / this.options.smooth,\r\n                y: ((this.parent.scale.y + original.y) * change - this.parent.scale.y) / this.options.smooth\r\n            }\r\n            this.smoothingCount = 0\r\n            this.smoothingCenter = point\r\n        }\r\n        else {\r\n            let oldPoint\r\n            if (!this.options.center) {\r\n                oldPoint = this.parent.toLocal(point)\r\n            }\r\n            this.parent.scale.x *= change\r\n            this.parent.scale.y *= change\r\n            this.parent.emit('zoomed', { viewport: this.parent, type: 'wheel' })\r\n            const clamp = this.parent.plugins.get('clamp-zoom', true)\r\n            if (clamp) {\r\n                clamp.clamp()\r\n            }\r\n            if (this.options.center) {\r\n                this.parent.moveCenter(this.options.center)\r\n            }\r\n            else {\r\n                const newPoint = this.parent.toGlobal(oldPoint)\r\n                this.parent.x += point.x - newPoint.x\r\n                this.parent.y += point.y - newPoint.y\r\n            }\r\n        }\r\n        this.parent.emit('moved', { viewport: this.parent, type: 'wheel' })\r\n        this.parent.emit('wheel', { wheel: { dx: e.deltaX, dy: e.deltaY, dz: e.deltaZ }, event: e, viewport: this.parent })\r\n        if (!this.parent.options.passiveWheel) {\r\n            return true\r\n        }\r\n    }\r\n}\r\n","import { Plugin } from './plugin'\r\n\r\n/**\r\n * @typedef MouseEdgesOptions\r\n * @property {number} [radius] distance from center of screen in screen pixels\r\n * @property {number} [distance] distance from all sides in screen pixels\r\n * @property {number} [top] alternatively, set top distance (leave unset for no top scroll)\r\n * @property {number} [bottom] alternatively, set bottom distance (leave unset for no top scroll)\r\n * @property {number} [left] alternatively, set left distance (leave unset for no top scroll)\r\n * @property {number} [right] alternatively, set right distance (leave unset for no top scroll)\r\n * @property {number} [speed=8] speed in pixels/frame to scroll viewport\r\n * @property {boolean} [reverse] reverse direction of scroll\r\n * @property {boolean} [noDecelerate] don't use decelerate plugin even if it's installed\r\n * @property {boolean} [linear] if using radius, use linear movement (+/- 1, +/- 1) instead of angled movement (Math.cos(angle from center), Math.sin(angle from center))\r\n * @property {boolean} [allowButtons] allows plugin to continue working even when there's a mousedown event\r\n */\r\n\r\nconst mouseEdgesOptions = {\r\n    radius: null,\r\n    distance: null,\r\n    top: null,\r\n    bottom: null,\r\n    left: null,\r\n    right: null,\r\n    speed: 8,\r\n    reverse: false,\r\n    noDecelerate: false,\r\n    linear: false,\r\n    allowButtons: false\r\n}\r\n\r\nexport class MouseEdges extends Plugin {\r\n    /**\r\n     * Scroll viewport when mouse hovers near one of the edges.\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {MouseEdgeOptions} [options]\r\n     * @event mouse-edge-start(Viewport) emitted when mouse-edge starts\r\n     * @event mouse-edge-end(Viewport) emitted when mouse-edge ends\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent)\r\n        this.options = Object.assign({}, mouseEdgesOptions, options)\r\n        this.reverse = this.options.reverse ? 1 : -1\r\n        this.radiusSquared = Math.pow(this.options.radius, 2)\r\n        this.resize()\r\n    }\r\n\r\n    resize() {\r\n        const distance = this.options.distance\r\n        if (distance !== null) {\r\n            this.left = distance\r\n            this.top = distance\r\n            this.right = this.parent.worldScreenWidth - distance\r\n            this.bottom = this.parent.worldScreenHeight - distance\r\n        }\r\n        else if (!this.radius) {\r\n            this.left = this.options.left\r\n            this.top = this.options.top\r\n            this.right = this.options.right === null ? null : this.parent.worldScreenWidth - this.options.right\r\n            this.bottom = this.options.bottom === null ? null : this.parent.worldScreenHeight - this.options.bottom\r\n        }\r\n    }\r\n\r\n    down() {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        if (!this.options.allowButtons) {\r\n            this.horizontal = this.vertical = null\r\n        }\r\n    }\r\n\r\n    move(event) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        if ((event.data.pointerType !== 'mouse' && event.data.identifier !== 1) || (!this.options.allowButtons && event.data.buttons !== 0)) {\r\n            return\r\n        }\r\n        const x = event.data.global.x\r\n        const y = event.data.global.y\r\n\r\n        if (this.radiusSquared) {\r\n            const center = this.parent.toScreen(this.parent.center)\r\n            const distance = Math.pow(center.x - x, 2) + Math.pow(center.y - y, 2)\r\n            if (distance >= this.radiusSquared) {\r\n                const angle = Math.atan2(center.y - y, center.x - x)\r\n                if (this.options.linear) {\r\n                    this.horizontal = Math.round(Math.cos(angle)) * this.options.speed * this.reverse * (60 / 1000)\r\n                    this.vertical = Math.round(Math.sin(angle)) * this.options.speed * this.reverse * (60 / 1000)\r\n                }\r\n                else {\r\n                    this.horizontal = Math.cos(angle) * this.options.speed * this.reverse * (60 / 1000)\r\n                    this.vertical = Math.sin(angle) * this.options.speed * this.reverse * (60 / 1000)\r\n                }\r\n            }\r\n            else {\r\n                if (this.horizontal) {\r\n                    this.decelerateHorizontal()\r\n                }\r\n                if (this.vertical) {\r\n                    this.decelerateVertical()\r\n                }\r\n                this.horizontal = this.vertical = 0\r\n            }\r\n        }\r\n        else {\r\n            if (this.left !== null && x < this.left) {\r\n                this.horizontal = 1 * this.reverse * this.options.speed * (60 / 1000)\r\n            }\r\n            else if (this.right !== null && x > this.right) {\r\n                this.horizontal = -1 * this.reverse * this.options.speed * (60 / 1000)\r\n            }\r\n            else {\r\n                this.decelerateHorizontal()\r\n                this.horizontal = 0\r\n            }\r\n            if (this.top !== null && y < this.top) {\r\n                this.vertical = 1 * this.reverse * this.options.speed * (60 / 1000)\r\n            }\r\n            else if (this.bottom !== null && y > this.bottom) {\r\n                this.vertical = -1 * this.reverse * this.options.speed * (60 / 1000)\r\n            }\r\n            else {\r\n                this.decelerateVertical()\r\n                this.vertical = 0\r\n            }\r\n        }\r\n    }\r\n\r\n    decelerateHorizontal() {\r\n        const decelerate = this.parent.plugins.get('decelerate', true)\r\n        if (this.horizontal && decelerate && !this.options.noDecelerate) {\r\n            decelerate.activate({ x: (this.horizontal * this.options.speed * this.reverse) / (1000 / 60) })\r\n        }\r\n    }\r\n\r\n    decelerateVertical() {\r\n        const decelerate = this.parent.plugins.get('decelerate', true)\r\n        if (this.vertical && decelerate && !this.options.noDecelerate) {\r\n            decelerate.activate({ y: (this.vertical * this.options.speed * this.reverse) / (1000 / 60) })\r\n        }\r\n    }\r\n\r\n    up() {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        if (this.horizontal) {\r\n            this.decelerateHorizontal()\r\n        }\r\n        if (this.vertical) {\r\n            this.decelerateVertical()\r\n        }\r\n        this.horizontal = this.vertical = null\r\n    }\r\n\r\n    update() {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n\r\n        if (this.horizontal || this.vertical) {\r\n            const center = this.parent.center\r\n            if (this.horizontal) {\r\n                center.x += this.horizontal * this.options.speed\r\n            }\r\n            if (this.vertical) {\r\n                center.y += this.vertical * this.options.speed\r\n            }\r\n            this.parent.moveCenter(center)\r\n            this.parent.emit('moved', { viewport: this.parent, type: 'mouse-edges' })\r\n        }\r\n    }\r\n}","import * as PIXI from 'pixi.js-legacy'\nimport { Plugin } from './plugin'\nimport ease from '../ease'\n\n/**\n * To set the zoom level, use: (1) scale, (2) scaleX and scaleY, or (3) width and/or height\n * @typedef {options} AnimateOptions\n * @property {number} [time=1000] to animate\n * @property {PIXI.Point} [position=viewport.center] position to move viewport\n * @property {number} [width] desired viewport width in world pixels (use instead of scale; aspect ratio is maintained if height is not provided)\n * @property {number} [height] desired viewport height in world pixels (use instead of scale; aspect ratio is maintained if width is not provided)\n * @property {number} [scale] scale to change zoom (scale.x = scale.y)\n * @property {number} [scaleX] independently change zoom in x-direction\n * @property {number} [scaleY] independently change zoom in y-direction\n * @property {(function|string)} [ease=linear] easing function to use\n * @property {function} [callbackOnComplete]\n * @property {boolean} [removeOnInterrupt] removes this plugin if interrupted by any user input\n */\n\nconst animateOptions = {\n    removeOnInterrupt: false,\n    ease: 'linear',\n    time: 1000\n}\n\nexport class Animate extends Plugin\n{\n    /**\n     * @private\n     * @param {Viewport} parent\n     * @param {AnimateOptions} [options]\n     * @fires animate-end\n     */\n    constructor(parent, options={})\n    {\n        super(parent)\n        this.options = Object.assign({}, animateOptions, options)\n        this.options.ease = ease(this.options.ease)\n        this.setupPosition()\n        this.setupZoom()\n    }\n\n    setupPosition()\n    {\n        if (typeof this.options.position !== 'undefined')\n        {\n            this.startX = this.parent.center.x\n            this.startY = this.parent.center.y\n            this.deltaX = this.options.position.x - this.parent.center.x\n            this.deltaY = this.options.position.y - this.parent.center.y\n            this.keepCenter = false\n        }\n        else\n        {\n            this.keepCenter = true\n        }\n    }\n\n    setupZoom()\n    {\n        this.width = null\n        this.height = null\n        if (typeof this.options.scale !== 'undefined')\n        {\n            this.width = this.parent.screenWidth / this.options.scale\n        }\n        else if (typeof this.options.scaleX !== 'undefined' || typeof this.options.scaleY !== 'undefined')\n        {\n            if (typeof this.options.scaleX !== 'undefined')\n            {\n                // screenSizeInWorldPixels = screenWidth / scale\n                this.width = this.parent.screenWidth / this.options.scaleX\n            }\n            if (typeof this.options.scaleY !== 'undefined')\n            {\n                this.height = this.parent.screenHeight / this.options.scaleY\n            }\n        }\n        else\n        {\n            if (typeof this.options.width !== 'undefined')\n            {\n                this.width = this.options.width\n            }\n            if (typeof this.options.height !== 'undefined')\n            {\n                this.height = this.options.height\n            }\n        }\n        if (typeof this.width !== null)\n        {\n            this.startWidth = this.parent.screenWidthInWorldPixels\n            this.deltaWidth = this.width - this.startWidth\n        }\n        if (typeof this.height !== null)\n        {\n            this.startHeight = this.parent.screenHeightInWorldPixels\n            this.deltaHeight = this.height - this.startHeight\n        }\n        this.time = 0\n    }\n\n    down()\n    {\n        if (this.options.removeOnInterrupt)\n        {\n            this.parent.plugins.remove('animate')\n        }\n    }\n\n    complete()\n    {\n        this.parent.plugins.remove('animate')\n        if (this.width !== null)\n        {\n            this.parent.fitWidth(this.width, this.keepCenter, this.height === null)\n        }\n        if (this.height !== null)\n        {\n            this.parent.fitHeight(this.height, this.keepCenter, this.width === null)\n        }\n        if (!this.keepCenter)\n        {\n            this.parent.moveCenter(this.options.position.x, this.options.position.y)\n        }\n        this.parent.emit('animate-end', this.parent)\n        if (this.options.callbackOnComplete)\n        {\n            this.options.callbackOnComplete(this.parent)\n        }\n    }\n\n    update(elapsed)\n    {\n        if (this.paused)\n        {\n            return\n        }\n        this.time += elapsed\n        if (this.time >= this.options.time)\n        {\n            this.complete()\n        }\n        else\n        {\n            const originalZoom = new PIXI.Point(this.parent.scale.x, this.parent.scale.y)\n            const percent = this.options.ease(this.time, 0, 1, this.options.time)\n            if (this.width !== null)\n            {\n                this.parent.fitWidth(this.startWidth + this.deltaWidth * percent, this.keepCenter, this.height === null)\n            }\n            if (this.height !== null)\n            {\n                this.parent.fitHeight(this.startHeight + this.deltaHeight * percent, this.keepCenter, this.width === null)\n            }\n            if (this.width === null)\n            {\n                this.parent.scale.x = this.parent.scale.y\n            }\n            else if (this.height === null)\n            {\n                this.parent.scale.y = this.parent.scale.x\n            }\n            if (!this.keepCenter)\n            {\n                const original = new PIXI.Point(this.parent.x, this.parent.y)\n                this.parent.moveCenter(this.startX + this.deltaX * percent, this.startY + this.deltaY * percent)\n                this.parent.emit('moved', { viewport: this.parent, original, type: 'animate'})\n            }\n            if (this.width || this.height)\n            {\n                this.parent.emit('zoomed', { viewport: this.parent, original: originalZoom, type: 'animate' })\n            }\n            if (!this.keepCenter)\n            {\n            }\n        }\n    }\n}","import * as PIXI from 'pixi.js-legacy'\n\nimport { InputManager } from './input-manager'\nimport { PluginManager } from './plugin-manager'\nimport { Drag } from './plugins/drag'\nimport { Pinch } from './plugins/pinch'\nimport { Clamp } from './plugins/clamp'\nimport { ClampZoom } from './plugins/clamp-zoom'\nimport { Decelerate } from './plugins/decelerate'\nimport { Bounce } from './plugins/bounce'\nimport { Snap } from './plugins/snap'\nimport { SnapZoom } from './plugins/snap-zoom'\nimport { Follow } from './plugins/follow'\nimport { Wheel } from './plugins/wheel'\nimport { MouseEdges } from './plugins/mouse-edges'\nimport { Animate } from './plugins/animate'\nexport { Plugin } from './plugins/plugin'\n\n/**\n * @typedef {object} ViewportOptions\n * @property {number} [screenWidth=window.innerWidth]\n * @property {number} [screenHeight=window.innerHeight]\n * @property {number} [worldWidth=this.width]\n * @property {number} [worldHeight=this.height]\n * @property {number} [threshold=5] number of pixels to move to trigger an input event (e.g., drag, pinch) or disable a clicked event\n * @property {boolean} [passiveWheel=true] whether the 'wheel' event is set to passive (note: if false, e.preventDefault() will be called when wheel is used over the viewport)\n * @property {boolean} [stopPropagation=false] whether to stopPropagation of events that impact the viewport (except wheel events, see options.passiveWheel)\n * @property {HitArea} [forceHitArea] change the default hitArea from world size to a new value\n * @property {boolean} [noTicker] set this if you want to manually call update() function on each frame\n * @property {PIXI.Ticker} [ticker=PIXI.Ticker.shared] use this PIXI.ticker for updates\n * @property {PIXI.InteractionManager} [interaction=null] InteractionManager, available from instantiated WebGLRenderer/CanvasRenderer.plugins.interaction - used to calculate pointer postion relative to canvas location on screen\n * @property {HTMLElement} [divWheel=document.body] div to attach the wheel event\n * @property {boolean} [disableOnContextMenu] remove oncontextmenu=() => {} from the divWheel element\n */\n\nconst viewportOptions = {\n    screenWidth: window.innerWidth,\n    screenHeight: window.innerHeight,\n    worldWidth: null,\n    worldHeight: null,\n    threshold: 5,\n    passiveWheel: true,\n    stopPropagation: false,\n    forceHitArea: null,\n    noTicker: false,\n    interaction: null,\n    disableOnContextMenu: false\n}\n\n/**\n * Main class to use when creating a Viewport\n */\nexport class Viewport extends PIXI.Container {\n    /**\n     * @param {ViewportOptions} [options]\n     * @fires clicked\n     * @fires drag-start\n     * @fires drag-end\n     * @fires drag-remove\n     * @fires pinch-start\n     * @fires pinch-end\n     * @fires pinch-remove\n     * @fires snap-start\n     * @fires snap-end\n     * @fires snap-remove\n     * @fires snap-zoom-start\n     * @fires snap-zoom-end\n     * @fires snap-zoom-remove\n     * @fires bounce-x-start\n     * @fires bounce-x-end\n     * @fires bounce-y-start\n     * @fires bounce-y-end\n     * @fires bounce-remove\n     * @fires wheel\n     * @fires wheel-remove\n     * @fires wheel-scroll\n     * @fires wheel-scroll-remove\n     * @fires mouse-edge-start\n     * @fires mouse-edge-end\n     * @fires mouse-edge-remove\n     * @fires moved\n     * @fires moved-end\n     * @fires zoomed\n     * @fires zoomed-end\n     * @fires frame-end\n     */\n    constructor(options = {}) {\n        super()\n        this.options = Object.assign({}, viewportOptions, options)\n\n        // needed to pull this out of viewportOptions because of pixi.js v4 support (which changed from PIXI.ticker.shared to PIXI.Ticker.shared...sigh)\n        if (options.ticker) {\n            this.options.ticker = options.ticker\n        }\n        else {\n            // to avoid Rollup transforming our import, save pixi namespace in a variable\n            // from here: https://github.com/pixijs/pixi.js/issues/5757\n            let ticker\n            const pixiNS = PIXI\n            if (parseInt(/^(\\d+)\\./.exec(PIXI.VERSION)[1]) < 5) {\n                ticker = pixiNS.ticker.shared\n            }\n            else {\n                ticker = pixiNS.Ticker.shared\n            }\n            this.options.ticker = options.ticker || ticker\n        }\n\n        /** @type {number} */\n        this.screenWidth = this.options.screenWidth\n\n        /** @type {number} */\n        this.screenHeight = this.options.screenHeight\n\n        this._worldWidth = this.options.worldWidth\n        this._worldHeight = this.options.worldHeight\n        this.forceHitArea = this.options.forceHitArea\n\n        /**\n         * number of pixels to move to trigger an input event (e.g., drag, pinch) or disable a clicked event\n         * @type {number}\n         */\n        this.threshold = this.options.threshold\n\n        this.options.divWheel = this.options.divWheel || document.body\n\n        if (this.options.disableOnContextMenu) {\n            this.options.divWheel.oncontextmenu = e => e.preventDefault()\n        }\n\n        if (!this.options.noTicker) {\n            this.tickerFunction = () => this.update(this.options.ticker.elapsedMS)\n            this.options.ticker.add(this.tickerFunction)\n        }\n\n        this.input = new InputManager(this)\n\n        /**\n         * Use this to add user plugins or access existing plugins (e.g., to pause, resume, or remove them)\n         * @type {PluginManager}\n         */\n        this.plugins = new PluginManager(this)\n    }\n\n    /**\n     * overrides PIXI.Container's destroy to also remove the 'wheel' and PIXI.Ticker listeners\n     * @param {(object|boolean)} [options] - Options parameter. A boolean will act as if all options have been set to that value\n     * @param {boolean} [options.children=false] - if set to true, all the children will have their destroy method called as well. 'options' will be passed on to those calls.\n     * @param {boolean} [options.texture=false] - Only used for child Sprites if options.children is set to true. Should it destroy the texture of the child sprite\n     * @param {boolean} [options.baseTexture=false] - Only used for child Sprites if options.children is set to true. Should it destroy the base texture of the child sprite     */\n    destroy(options) {\n        if (!this.options.noTicker) {\n            this.options.ticker.remove(this.tickerFunction)\n        }\n        this.input.destroy()\n        super.destroy(options)\n    }\n\n    /**\n     * update viewport on each frame\n     * by default, you do not need to call this unless you set options.noTicker=true\n     * @param {number} elapsed time in milliseconds since last update\n     */\n    update(elapsed) {\n        if (!this.pause) {\n            this.plugins.update(elapsed)\n\n            if (this.lastViewport) {\n                // check for moved-end event\n                if (this.lastViewport.x !== this.x || this.lastViewport.y !== this.y) {\n                    this.moving = true\n                }\n                else {\n                    if (this.moving) {\n                        this.emit('moved-end', this)\n                        this.moving = false\n                    }\n                }\n                // check for zoomed-end event\n                if (this.lastViewport.scaleX !== this.scale.x || this.lastViewport.scaleY !== this.scale.y) {\n                    this.zooming = true\n                }\n                else {\n                    if (this.zooming) {\n                        this.emit('zoomed-end', this)\n                        this.zooming = false\n                    }\n                }\n            }\n\n            if (!this.forceHitArea) {\n                this._hitAreaDefault = new PIXI.Rectangle(this.left, this.top, this.worldScreenWidth, this.worldScreenHeight)\n                this.hitArea = this._hitAreaDefault\n            }\n\n            this._dirty = this._dirty || !this.lastViewport ||\n                this.lastViewport.x !== this.x || this.lastViewport.y !== this.y ||\n                this.lastViewport.scaleX !== this.scale.x || this.lastViewport.scaleY !== this.scale.y\n\n            this.lastViewport = {\n                x: this.x,\n                y: this.y,\n                scaleX: this.scale.x,\n                scaleY: this.scale.y\n            }\n            this.emit('frame-end', this)\n        }\n    }\n\n    /**\n     * use this to set screen and world sizes--needed for pinch/wheel/clamp/bounce\n     * @param {number} [screenWidth=window.innerWidth]\n     * @param {number} [screenHeight=window.innerHeight]\n     * @param {number} [worldWidth]\n     * @param {number} [worldHeight]\n     */\n    resize(screenWidth = window.innerWidth, screenHeight = window.innerHeight, worldWidth, worldHeight) {\n        this.screenWidth = screenWidth\n        this.screenHeight = screenHeight\n        if (typeof worldWidth !== 'undefined') {\n            this._worldWidth = worldWidth\n        }\n        if (typeof worldHeight !== 'undefined') {\n            this._worldHeight = worldHeight\n        }\n        this.plugins.resize()\n        this.dirty = true\n    }\n\n    /**\n     * world width in pixels\n     * @type {number}\n     */\n    get worldWidth() {\n        if (this._worldWidth) {\n            return this._worldWidth\n        }\n        else {\n            return this.width / this.scale.x\n        }\n    }\n    set worldWidth(value) {\n        this._worldWidth = value\n        this.plugins.resize()\n    }\n\n    /**\n     * world height in pixels\n     * @type {number}\n     */\n    get worldHeight() {\n        if (this._worldHeight) {\n            return this._worldHeight\n        }\n        else {\n            return this.height / this.scale.y\n        }\n    }\n    set worldHeight(value) {\n        this._worldHeight = value\n        this.plugins.resize()\n    }\n\n    /**\n     * get visible bounds of viewport\n     * @returns {PIXI.Rectangle}\n     */\n    getVisibleBounds() {\n        return new PIXI.Rectangle(this.left, this.top, this.worldScreenWidth, this.worldScreenHeight)\n    }\n\n    /**\n     * change coordinates from screen to world\n     * @param {(number|PIXI.Point)} x or point\n     * @param {number} [y]\n     * @return {PIXI.Point}\n     */\n    toWorld(x, y) {\n        if (arguments.length === 2) {\n            return this.toLocal(new PIXI.Point(x, y))\n        }\n        else {\n            return this.toLocal(x)\n        }\n    }\n\n    /**\n     * change coordinates from world to screen\n     * @param {(number|PIXI.Point)} x or point\n     * @param {number} [y]\n     * @return {PIXI.Point}\n     */\n    toScreen(x, y) {\n        if (arguments.length === 2) {\n            return this.toGlobal(new PIXI.Point(x, y))\n        }\n        else {\n            return this.toGlobal(x)\n        }\n    }\n\n    /**\n     * screen width in world coordinates\n     * @type {number}\n     */\n    get worldScreenWidth() {\n        return this.screenWidth / this.scale.x\n    }\n\n    /**\n     * screen height in world coordinates\n     * @type {number}\n     */\n    get worldScreenHeight() {\n        return this.screenHeight / this.scale.y\n    }\n\n    /**\n     * world width in screen coordinates\n     * @type {number}\n     */\n    get screenWorldWidth() {\n        return this.worldWidth * this.scale.x\n    }\n\n    /**\n     * world height in screen coordinates\n     * @type {number}\n     */\n    get screenWorldHeight() {\n        return this.worldHeight * this.scale.y\n    }\n\n    /**\n     * center of screen in world coordinates\n     * @type {PIXI.Point}\n     */\n    get center() {\n        return new PIXI.Point(this.worldScreenWidth / 2 - this.x / this.scale.x, this.worldScreenHeight / 2 - this.y / this.scale.y)\n    }\n    set center(value) {\n        this.moveCenter(value)\n    }\n\n    /**\n     * move center of viewport to point\n     * @param {(number|PIXI.Point)} x or point\n     * @param {number} [y]\n     * @return {Viewport} this\n     */\n    moveCenter() {\n        let x, y\n        if (!isNaN(arguments[0])) {\n            x = arguments[0]\n            y = arguments[1]\n        }\n        else {\n            x = arguments[0].x\n            y = arguments[0].y\n        }\n        this.position.set((this.worldScreenWidth / 2 - x) * this.scale.x, (this.worldScreenHeight / 2 - y) * this.scale.y)\n        this.plugins.reset()\n        this.dirty = true\n        return this\n    }\n\n    /**\n     * top-left corner of Viewport\n     * @type {PIXI.Point}\n     */\n    get corner() {\n        return new PIXI.Point(-this.x / this.scale.x, -this.y / this.scale.y)\n    }\n    set corner(value) {\n        this.moveCorner(value)\n    }\n\n    /**\n     * move viewport's top-left corner; also clamps and resets decelerate and bounce (as needed)\n     * @param {(number|PIXI.Point)} x or point\n     * @param {number} [y]\n     * @return {Viewport} this\n     */\n    moveCorner(x, y) {\n        if (arguments.length === 1) {\n            this.position.set(-x.x * this.scale.x, -x.y * this.scale.y)\n        }\n        else {\n            this.position.set(-x * this.scale.x, -y * this.scale.y)\n        }\n        this.plugins.reset()\n        return this\n    }\n\n    /**\n     * get how many world pixels fit in screen's width\n     * @type {number}\n     */\n    get screenWidthInWorldPixels() {\n        return this.screenWidth / this.scale.x\n    }\n\n    /**\n     * get how many world pixels fit on screen's height\n     * @type {number}\n     */\n    get screenHeightInWorldPixels() {\n        return this.screenHeight / this.scale.y\n    }\n\n    /**\n     * find the scale value that fits a world width on the screen\n     * does not change the viewport (use fit... to change)\n     * @param {number} width in world pixels\n     * @returns {number} scale\n     */\n    findFitWidth(width) {\n        return this.screenWidth / width\n    }\n\n    /**\n     * finds the scale value that fits a world height on the screens\n     * does not change the viewport (use fit... to change)\n     * @param {number} height in world pixels\n     * @returns {number} scale\n     */\n    findFitHeight(height) {\n        return this.screenHeight / height\n    }\n\n    /**\n     * finds the scale value that fits the smaller of a world width and world height on the screen\n     * does not change the viewport (use fit... to change)\n     * @param {number} width in world pixels\n     * @param {number} height in world pixels\n     * @returns {number} scale\n     */\n    findFit(width, height) {\n        const scaleX = this.screenWidth / width\n        const scaleY = this.screenHeight / height\n        return Math.min(scaleX, scaleY)\n    }\n\n    /**\n     * finds the scale value that fits the larger of a world width and world height on the screen\n     * does not change the viewport (use fit... to change)\n     * @param {number} width in world pixels\n     * @param {number} height in world pixels\n     * @returns {number} scale\n     */\n    findCover(width, height) {\n        const scaleX = this.screenWidth / width\n        const scaleY = this.screenHeight / height\n        return Math.max(scaleX, scaleY)\n    }\n\n    /**\n     * change zoom so the width fits in the viewport\n     * @param {number} [width=this.worldWidth] in world coordinates\n     * @param {boolean} [center] maintain the same center\n     * @param {boolean} [scaleY=true] whether to set scaleY=scaleX\n     * @param {boolean} [noClamp] whether to disable clamp-zoom\n     * @returns {Viewport} this\n     */\n    fitWidth(width, center, scaleY = true, noClamp) {\n        let save\n        if (center) {\n            save = this.center\n        }\n        this.scale.x = this.screenWidth / width\n\n        if (scaleY) {\n            this.scale.y = this.scale.x\n        }\n\n        const clampZoom = this.plugins.get('clamp-zoom', true)\n        if (!noClamp && clampZoom) {\n            clampZoom.clamp()\n        }\n\n        if (center) {\n            this.moveCenter(save)\n        }\n        return this\n    }\n\n    /**\n     * change zoom so the height fits in the viewport\n     * @param {number} [height=this.worldHeight] in world coordinates\n     * @param {boolean} [center] maintain the same center of the screen after zoom\n     * @param {boolean} [scaleX=true] whether to set scaleX = scaleY\n     * @param {boolean} [noClamp] whether to disable clamp-zoom\n     * @returns {Viewport} this\n     */\n    fitHeight(height, center, scaleX = true, noClamp) {\n        let save\n        if (center) {\n            save = this.center\n        }\n        this.scale.y = this.screenHeight / height\n\n        if (scaleX) {\n            this.scale.x = this.scale.y\n        }\n\n        const clampZoom = this.plugins.get('clamp-zoom', true)\n        if (!noClamp && clampZoom) {\n            clampZoom.clamp()\n        }\n\n        if (center) {\n            this.moveCenter(save)\n        }\n        return this\n    }\n\n    /**\n     * change zoom so it fits the entire world in the viewport\n     * @param {boolean} center maintain the same center of the screen after zoom\n     * @returns {Viewport} this\n     */\n    fitWorld(center) {\n        let save\n        if (center) {\n            save = this.center\n        }\n        this.scale.x = this.screenWidth / this.worldWidth\n        this.scale.y = this.screenHeight / this.worldHeight\n        if (this.scale.x < this.scale.y) {\n            this.scale.y = this.scale.x\n        }\n        else {\n            this.scale.x = this.scale.y\n        }\n\n        const clampZoom = this.plugins.get('clamp-zoom', true)\n        if (clampZoom) {\n            clampZoom.clamp()\n        }\n\n        if (center) {\n            this.moveCenter(save)\n        }\n        return this\n    }\n\n    /**\n     * change zoom so it fits the size or the entire world in the viewport\n     * @param {boolean} [center] maintain the same center of the screen after zoom\n     * @param {number} [width=this.worldWidth] desired width\n     * @param {number} [height=this.worldHeight] desired height\n     * @returns {Viewport} this\n     */\n    fit(center, width = this.worldWidth, height = this.worldHeight) {\n        let save\n        if (center) {\n            save = this.center\n        }\n        this.scale.x = this.screenWidth / width\n        this.scale.y = this.screenHeight / height\n        if (this.scale.x < this.scale.y) {\n            this.scale.y = this.scale.x\n        }\n        else {\n            this.scale.x = this.scale.y\n        }\n        const clampZoom = this.plugins.get('clamp-zoom', true)\n        if (clampZoom) {\n            clampZoom.clamp()\n        }\n        if (center) {\n            this.moveCenter(save)\n        }\n        return this\n    }\n\n    /**\n     * zoom viewport to specific value\n     * @param {number} scale value (e.g., 1 would be 100%, 0.25 would be 25%)\n     * @param {boolean} [center] maintain the same center of the screen after zoom\n     * @return {Viewport} this\n     */\n    setZoom(scale, center) {\n        let save\n        if (center) {\n            save = this.center\n        }\n        this.scale.set(scale)\n        const clampZoom = this.plugins.get('clamp-zoom', true)\n        if (clampZoom) {\n            clampZoom.clamp()\n        }\n        if (center) {\n            this.moveCenter(save)\n        }\n        return this\n    }\n\n    /**\n     * zoom viewport by a certain percent (in both x and y direction)\n     * @param {number} percent change (e.g., 0.25 would increase a starting scale of 1.0 to 1.25)\n     * @param {boolean} [center] maintain the same center of the screen after zoom\n     * @return {Viewport} this\n     */\n    zoomPercent(percent, center) {\n        return this.setZoom(this.scale.x + this.scale.x * percent, center)\n    }\n\n    /**\n     * zoom viewport by increasing/decreasing width by a certain number of pixels\n     * @param {number} change in pixels\n     * @param {boolean} [center] maintain the same center of the screen after zoom\n     * @return {Viewport} this\n     */\n    zoom(change, center) {\n        this.fitWidth(change + this.worldScreenWidth, center)\n        return this\n    }\n\n    /**\n     * changes scale of viewport and maintains center of viewport\n     * @type {number}\n     */\n    set scaled(scale) {\n        this.setZoom(scale, true)\n    }\n    get scaled() {\n        return this.scale.x\n    }\n\n    /**\n     * @param {SnapZoomOptions} options\n     */\n    snapZoom(options) {\n        this.plugins.add('snap-zoom', new SnapZoom(this, options))\n        return this\n    }\n\n    /**\n     * is container out of world bounds\n     * @returns {OutOfBounds}\n     */\n    OOB() {\n        return {\n            left: this.left < 0,\n            right: this.right > this.worldWidth,\n            top: this.top < 0,\n            bottom: this.bottom > this._worldHeight,\n            cornerPoint: new PIXI.Point(\n                this.worldWidth * this.scale.x - this.screenWidth,\n                this.worldHeight * this.scale.y - this.screenHeight\n            )\n        }\n    }\n\n    /**\n     * world coordinates of the right edge of the screen\n     * @type {number}\n     */\n    get right() {\n        return -this.x / this.scale.x + this.worldScreenWidth\n    }\n    set right(value) {\n        this.x = -value * this.scale.x + this.screenWidth\n        this.plugins.reset()\n    }\n\n    /**\n     * world coordinates of the left edge of the screen\n     * @type { number }\n     */\n    get left() {\n        return -this.x / this.scale.x\n    }\n    set left(value) {\n        this.x = -value * this.scale.x\n        this.plugins.reset()\n    }\n\n    /**\n     * world coordinates of the top edge of the screen\n     * @type {number}\n     */\n    get top() {\n        return -this.y / this.scale.y\n    }\n    set top(value) {\n        this.y = -value * this.scale.y\n        this.plugins.reset()\n    }\n\n    /**\n     * world coordinates of the bottom edge of the screen\n     * @type {number}\n     */\n    get bottom() {\n        return -this.y / this.scale.y + this.worldScreenHeight\n    }\n    set bottom(value) {\n        this.y = -value * this.scale.y + this.screenHeight\n        this.plugins.reset()\n    }\n\n    /**\n     * determines whether the viewport is dirty (i.e., needs to be renderered to the screen because of a change)\n     * @type {boolean}\n     */\n    get dirty() {\n        return this._dirty\n    }\n    set dirty(value) {\n        this._dirty = value\n    }\n\n    /**\n     * permanently changes the Viewport's hitArea\n     * NOTE: if not set then hitArea = PIXI.Rectangle(Viewport.left, Viewport.top, Viewport.worldScreenWidth, Viewport.worldScreenHeight)\n     * @returns {HitArea}\n     */\n    get forceHitArea() {\n        return this._forceHitArea\n    }\n    set forceHitArea(value) {\n        if (value) {\n            this._forceHitArea = value\n            this.hitArea = value\n        }\n        else {\n            this._forceHitArea = null\n            this.hitArea = new PIXI.Rectangle(0, 0, this.worldWidth, this.worldHeight)\n        }\n    }\n\n    /**\n     * enable one-finger touch to drag\n     * NOTE: if you expect users to use right-click dragging, you should enable viewport.options.disableOnContextMenu to avoid the context menu popping up on each right-click drag\n     * @param {DragOptions} [options]\n     * @returns {Viewport} this\n     */\n    drag(options) {\n        this.plugins.add('drag', new Drag(this, options))\n        return this\n    }\n\n    /**\n     * clamp to world boundaries or other provided boundaries\n     * NOTES:\n     *   clamp is disabled if called with no options; use { direction: 'all' } for all edge clamping\n     *   screenWidth, screenHeight, worldWidth, and worldHeight needs to be set for this to work properly\n     * @param {ClampOptions} [options]\n     * @returns {Viewport} this\n     */\n    clamp(options) {\n        this.plugins.add('clamp', new Clamp(this, options))\n        return this\n    }\n\n    /**\n     * decelerate after a move\n     * NOTE: this fires 'moved' event during deceleration\n     * @param {DecelerateOptions} [options]\n     * @return {Viewport} this\n     */\n    decelerate(options) {\n        this.plugins.add('decelerate', new Decelerate(this, options))\n        return this\n    }\n\n    /**\n     * bounce on borders\n     * NOTES:\n     *    screenWidth, screenHeight, worldWidth, and worldHeight needs to be set for this to work properly\n     *    fires 'moved', 'bounce-x-start', 'bounce-y-start', 'bounce-x-end', and 'bounce-y-end' events\n     * @param {object} [options]\n     * @param {string} [options.sides=all] all, horizontal, vertical, or combination of top, bottom, right, left (e.g., 'top-bottom-right')\n     * @param {number} [options.friction=0.5] friction to apply to decelerate if active\n     * @param {number} [options.time=150] time in ms to finish bounce\n     * @param {object} [options.bounceBox] use this bounceBox instead of (0, 0, viewport.worldWidth, viewport.worldHeight)\n     * @param {number} [options.bounceBox.x=0]\n     * @param {number} [options.bounceBox.y=0]\n     * @param {number} [options.bounceBox.width=viewport.worldWidth]\n     * @param {number} [options.bounceBox.height=viewport.worldHeight]\n     * @param {string|function} [options.ease=easeInOutSine] ease function or name (see http://easings.net/ for supported names)\n     * @param {string} [options.underflow=center] (top/bottom/center and left/right/center, or center) where to place world if too small for screen\n     * @return {Viewport} this\n     */\n    bounce(options) {\n        this.plugins.add('bounce', new Bounce(this, options))\n        return this\n    }\n\n    /**\n     * enable pinch to zoom and two-finger touch to drag\n     * @param {PinchOptions} [options]\n     * @return {Viewport} this\n     */\n    pinch(options) {\n        this.plugins.add('pinch', new Pinch(this, options))\n        return this\n    }\n\n    /**\n     * snap to a point\n     * @param {number} x\n     * @param {number} y\n     * @param {SnapOptions} [options]\n     * @return {Viewport} this\n     */\n    snap(x, y, options) {\n        this.plugins.add('snap', new Snap(this, x, y, options))\n        return this\n    }\n\n    /**\n     * follow a target\n     * NOTES:\n     *    uses the (x, y) as the center to follow; for PIXI.Sprite to work properly, use sprite.anchor.set(0.5)\n     *    options.acceleration is not perfect as it doesn't know the velocity of the target\n     *    it adds acceleration to the start of movement and deceleration to the end of movement when the target is stopped\n     *    fires 'moved' event\n     * @param {PIXI.DisplayObject} target to follow\n     * @param {FollowOptions} [options]\n     * @returns {Viewport} this\n     */\n    follow(target, options) {\n        this.plugins.add('follow', new Follow(this, target, options))\n        return this\n    }\n\n    /**\n     * zoom using mouse wheel\n     * @param {WheelOptions} [options]\n     * @return {Viewport} this\n     */\n    wheel(options) {\n        this.plugins.add('wheel', new Wheel(this, options))\n        return this\n    }\n\n    /**\n     * animate the position and/or scale of the viewport\n     * @param {AnimateOptions} options\n     * @returns {Viewport} this\n     */\n    animate(options) {\n        this.plugins.add('animate', new Animate(this, options))\n        return this\n    }\n\n    /**\n     * enable clamping of zoom to constraints\n     * @description\n     * The minWidth/Height settings are how small the world can get (as it would appear on the screen)\n     * before clamping. The maxWidth/maxHeight is how larger the world can scale (as it would appear on\n     * the screen) before clamping.\n     *\n     * For example, if you have a world size of 1000 x 1000 and a screen size of 100 x 100, if you set\n     * minWidth/Height = 100 then the world will not be able to zoom smaller than the screen size (ie,\n     * zooming out so it appears smaller than the screen). Similarly, if you set maxWidth/Height = 100\n     * the world will not be able to zoom larger than the screen size (ie, zooming in so it appears\n     * larger than the screen).\n     * @param {ClampZoomOptions} [options]\n     * @return {Viewport} this\n     */\n    clampZoom(options) {\n        this.plugins.add('clamp-zoom', new ClampZoom(this, options))\n        return this\n    }\n\n    /**\n     * Scroll viewport when mouse hovers near one of the edges or radius-distance from center of screen.\n     * NOTE: fires 'moved' event\n     * @param {MouseEdgesOptions} [options]\n     */\n    mouseEdges(options) {\n        this.plugins.add('mouse-edges', new MouseEdges(this, options))\n        return this\n    }\n\n    /**\n     * pause viewport (including animation updates such as decelerate)\n     * @type {boolean}\n     */\n    get pause() {\n        return this._pause\n    }\n    set pause(value) {\n        this._pause = value\n        this.lastViewport = null\n        this.moving = false\n        this.zooming = false\n        if (value) {\n            this.input.pause()\n        }\n    }\n\n    /**\n     * move the viewport so the bounding box is visible\n     * @param {number} x - left\n     * @param {number} y - top\n     * @param {number} width\n     * @param {number} height\n     * @param {boolean} [resizeToFit] resize the viewport so the box fits within the viewport\n     */\n    ensureVisible(x, y, width, height, resizeToFit) {\n        if (resizeToFit && (width > this.worldScreenWidth || height > this.worldScreenHeight)) {\n            this.fit(true, width, height)\n            this.emit('zoomed', { viewport: this, type: 'ensureVisible' })\n        }\n        let moved = false\n        if (x < this.left) {\n            this.left = x\n            moved = true\n        }\n        else if (x + width > this.right) {\n            this.right = x + width\n            moved = true\n        }\n        if (y < this.top) {\n            this.top = y\n            moved = true\n        }\n        else if (y + height > this.bottom) {\n            this.bottom = y + height\n            moved = true\n        }\n        if (moved) {\n            this.emit('moved', { viewport: this, type: 'ensureVisible' })\n        }\n    }\n}\n\n/**\n * fires after a mouse or touch click\n * @event Viewport#clicked\n * @type {object}\n * @property {PIXI.Point} screen\n * @property {PIXI.Point} world\n * @property {Viewport} viewport\n */\n\n/**\n * fires when a drag starts\n * @event Viewport#drag-start\n * @type {object}\n * @property {PIXI.Point} screen\n * @property {PIXI.Point} world\n * @property {Viewport} viewport\n */\n\n/**\n * fires when a drag ends\n * @event Viewport#drag-end\n * @type {object}\n * @property {PIXI.Point} screen\n * @property {PIXI.Point} world\n * @property {Viewport} viewport\n */\n\n/**\n * fires when a pinch starts\n * @event Viewport#pinch-start\n * @type {Viewport}\n */\n\n/**\n * fires when a pinch end\n * @event Viewport#pinch-end\n * @type {Viewport}\n */\n\n/**\n * fires when a snap starts\n * @event Viewport#snap-start\n * @type {Viewport}\n */\n\n/**\n * fires when a snap ends\n * @event Viewport#snap-end\n * @type {Viewport}\n */\n\n/**\n * fires when a snap-zoom starts\n * @event Viewport#snap-zoom-start\n * @type {Viewport}\n */\n\n/**\n * fires when a snap-zoom ends\n * @event Viewport#snap-zoom-end\n * @type {Viewport}\n */\n\n/**\n * fires when a bounce starts in the x direction\n * @event Viewport#bounce-x-start\n * @type {Viewport}\n */\n\n/**\n * fires when a bounce ends in the x direction\n * @event Viewport#bounce-x-end\n * @type {Viewport}\n */\n\n/**\n * fires when a bounce starts in the y direction\n * @event Viewport#bounce-y-start\n * @type {Viewport}\n */\n\n/**\n * fires when a bounce ends in the y direction\n * @event Viewport#bounce-y-end\n * @type {Viewport}\n */\n\n/**\n * fires when for a mouse wheel event\n * @event Viewport#wheel\n * @type {object}\n * @property {object} wheel\n * @property {number} wheel.dx\n * @property {number} wheel.dy\n * @property {number} wheel.dz\n * @property {Viewport} viewport\n */\n\n/**\n * fires when a wheel-scroll occurs\n * @event Viewport#wheel-scroll\n * @type {Viewport}\n */\n\n/**\n * fires when a mouse-edge starts to scroll\n * @event Viewport#mouse-edge-start\n * @type {Viewport}\n */\n\n/**\n * fires when the mouse-edge scrolling ends\n * @event Viewport#mouse-edge-end\n * @type {Viewport}\n */\n\n/**\n * fires when viewport moves through UI interaction, deceleration, ensureVisible, or follow\n * @event Viewport#moved\n * @type {object}\n * @property {Viewport} viewport\n * @property {string} type (drag, snap, pinch, follow, bounce-x, bounce-y, clamp-x, clamp-y, decelerate, mouse-edges, wheel, ensureVisible)\n */\n\n/**\n * fires when viewport moves through UI interaction, deceleration, ensureVisible, or follow\n * @event Viewport#zoomed\n * @type {object}\n * @property {Viewport} viewport\n * @property {string} type (drag-zoom, pinch, wheel, clamp-zoom, ensureVisible)\n */\n\n/**\n * fires when viewport stops moving\n * @event Viewport#moved-end\n * @type {Viewport}\n */\n\n/**\n * fires when viewport stops zooming\n * @event Viewport#zoomed-end\n * @type {Viewport}\n */\n\n/**\n* fires at the end of an update frame\n* @event Viewport#frame-end\n* @type {Viewport}\n*/\n\n/** @typedef HitArea {(PIXI.Rectangle | PIXI.Circle | PIXI.Ellipse | PIXI.Polygon | PIXI.RoundedRectangle)} */\n\n/**\n * @typedef {Object} OutOfBounds\n * @private\n * @property {boolean} left\n * @property {boolean} right\n * @property {boolean} top\n * @property {boolean} bottom\n * @property {PIXI.Point} cornerPoint\n */\n\n/**\n * @typedef {Object} LastViewport\n * @private\n * @property {number} x\n * @property {number} y\n * @property {number} scaleX\n * @property {number} scaleY\n */"],"names":["InputManager","viewport","touches","addListeners","interactive","forceHitArea","hitArea","PIXI","worldWidth","worldHeight","on","down","move","up","wheelFunction","e","handleWheel","options","divWheel","addEventListener","passive","passiveWheel","isMouseDown","removeEventListener","event","pause","worldVisible","data","pointerType","get","pointerId","push","id","last","count","global","clone","decelerate","plugins","bounce","isActive","clickedAvailable","stop","stopPropagation","change","Math","abs","threshold","distX","x","distY","y","checkThreshold","remove","emit","screen","world","toWorld","point","interaction","mapPositionToPoint","clientX","clientY","toLocal","getPointerPosition","left","right","top","bottom","wheel","preventDefault","touch","i","length","splice","PLUGIN_ORDER","PluginManager","list","name","plugin","index","current","indexOf","sort","ignorePaused","paused","elapsed","update","resize","reset","resume","result","Plugin","parent","dragOptions","direction","pressDrag","wheelScroll","reverse","clampWheel","underflow","factor","mouseButtons","keyToPress","ignoreKeyToPressOnTouch","Drag","Object","assign","moved","xDirection","yDirection","keyIsPressed","parseUnderflow","handleKeyPresses","codes","includes","code","buttons","mouse","clamp","toLowerCase","underflowX","underflowY","isMouse","input","button","checkButtons","checkKeyPress","newPoint","type","pointer","deltaX","deltaY","screenWorldWidth","screenWidth","scale","screenWorldHeight","screenHeight","pinchOptions","noDrag","percent","center","Pinch","active","pointers","first","second","sqrt","pow","oldPoint","dist","moveCenter","toGlobal","lastCenter","pinching","clampOptions","Clamp","scaleX","scaleY","noUnderflow","original","clampZoomOptions","minWidth","minHeight","maxWidth","maxHeight","minScale","maxScale","ClampZoom","width","worldScreenWidth","height","worldScreenHeight","fitWidth","fitHeight","set","decelerateOptions","friction","minSpeed","Decelerate","saved","time","performance","now","save","percentChangeX","percentChangeY","penner","umd","factory","module","linear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","a","p","s","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","v","easeOutBounce","easeInOutBounce","call","this","ease","defaults","Penner","bounceOptions","sides","bounceBox","Bounce","toX","toY","end","start","delta","box","x1","y1","topLeft","bottomRight","oob","drag","pinch","calcUnderflowX","calcUnderflowY","snapOptions","interrupt","removeOnComplete","removeOnInterrupt","forceStart","Snap","snapStart","snapping","corner","startX","startY","finished","moveCorner","snapZoomOptions","removeOnInterrupts","noMove","SnapZoom","xScale","yScale","xIndependent","yIndependent","container","createSnapping","oldCenter","followOptions","speed","acceleration","radius","Follow","target","velocity","distance","angle","atan2","decelerationDistance","min","max","changeX","changeY","wheelOptions","smooth","lineHeight","Wheel","smoothing","smoothingCenter","smoothingCount","sign","step","deltaMode","dx","dy","dz","deltaZ","mouseEdgesOptions","noDecelerate","allowButtons","MouseEdges","radiusSquared","horizontal","vertical","identifier","toScreen","round","decelerateHorizontal","decelerateVertical","activate","animateOptions","Animate","setupPosition","setupZoom","position","keepCenter","startWidth","screenWidthInWorldPixels","deltaWidth","startHeight","screenHeightInWorldPixels","deltaHeight","callbackOnComplete","complete","originalZoom","viewportOptions","window","innerWidth","innerHeight","noTicker","disableOnContextMenu","Viewport","ticker","pixiNS","parseInt","exec","shared","Ticker","_worldWidth","_worldHeight","document","body","oncontextmenu","tickerFunction","elapsedMS","add","destroy","lastViewport","moving","zooming","_hitAreaDefault","_dirty","dirty","arguments","isNaN","noClamp","clampZoom","setZoom","cornerPoint","resizeToFit","fit","value","_forceHitArea","_pause"],"mappings":"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"}